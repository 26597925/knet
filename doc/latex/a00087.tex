\hypertarget{a00087}{}\section{E\+:/knet-\/git/knet/knet/rpc\+\_\+api.h 文件参考}
\label{a00087}\index{E\+:/knet-\/git/knet/knet/rpc\+\_\+api.\+h@{E\+:/knet-\/git/knet/knet/rpc\+\_\+api.\+h}}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\\*
\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$ \hyperlink{a00087_a5d55f838d222f44965d99eac9a0381c1_a5d55f838d222f44965d99eac9a0381c1}{krpc\+\_\+create} ()
\begin{DoxyCompactList}\small\item\em R\+P\+C框架提供了一套底层\+R\+P\+C序列化及反序列化的基础，开发者不应该直接调用这些\+A\+P\+I，应使用代码生成工具 提供的代码框架来进行\+R\+P\+C操作，生成的代码框架屏蔽了所有烦人的细节，使用起来也会比直接调用这些\+A\+P\+I更 方便. \end{DoxyCompactList}\item 
void \hyperlink{a00087_ab07c8ccf1abc99b85f455a2f4280ac76_ab07c8ccf1abc99b85f455a2f4280ac76}{krpc\+\_\+destroy} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc)
\begin{DoxyCompactList}\small\item\em 销毁\+R\+P\+C \end{DoxyCompactList}\item 
int \hyperlink{a00087_aa12a9874d2b0308994c3fa651cdbbd61_aa12a9874d2b0308994c3fa651cdbbd61}{krpc\+\_\+add\+\_\+cb} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, uint16\+\_\+t rpcid, \hyperlink{a00051_a06bb708c1b97445d3a5d0c1b32ad2ab6_a06bb708c1b97445d3a5d0c1b32ad2ab6}{krpc\+\_\+cb\+\_\+t} cb)
\begin{DoxyCompactList}\small\item\em 注册\+R\+P\+C调用回调函数 \end{DoxyCompactList}\item 
int \hyperlink{a00087_a76529ccab5c6f0ada79cac791e299ef9_a76529ccab5c6f0ada79cac791e299ef9}{krpc\+\_\+del\+\_\+cb} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, uint16\+\_\+t rpcid)
\begin{DoxyCompactList}\small\item\em 删除注册过的\+R\+P\+C调用回调函数 \end{DoxyCompactList}\item 
\hyperlink{a00051_a06bb708c1b97445d3a5d0c1b32ad2ab6_a06bb708c1b97445d3a5d0c1b32ad2ab6}{krpc\+\_\+cb\+\_\+t} \hyperlink{a00087_a7841a0b4c828efcb607a51bbdd9c9ab1_a7841a0b4c828efcb607a51bbdd9c9ab1}{krpc\+\_\+get\+\_\+cb} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, uint16\+\_\+t rpcid)
\begin{DoxyCompactList}\small\item\em 取得注册过的\+R\+P\+C调用回调函数 \end{DoxyCompactList}\item 
int \hyperlink{a00087_a9c94cce18fdcbb5e184af7f2ea20cceb_a9c94cce18fdcbb5e184af7f2ea20cceb}{krpc\+\_\+proc} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, \hyperlink{a00051_a261dba04f46f5c59a68a05f69f5a65a8_a261dba04f46f5c59a68a05f69f5a65a8}{stream\+\_\+t} $\ast$stream)
\begin{DoxyCompactList}\small\item\em 处理\+R\+P\+C调用，从数据流反序列化\+R\+P\+C调用，并调用回调函数 \end{DoxyCompactList}\item 
int \hyperlink{a00087_a51bbf2caf4916c0c08d8c8d8d86e562e_a51bbf2caf4916c0c08d8c8d8d86e562e}{krpc\+\_\+call} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, \hyperlink{a00051_a261dba04f46f5c59a68a05f69f5a65a8_a261dba04f46f5c59a68a05f69f5a65a8}{stream\+\_\+t} $\ast$stream, uint16\+\_\+t rpcid, \hyperlink{a00051_a9c07dfc8c3b965f75b09f82fdb1bbb1e_a9c07dfc8c3b965f75b09f82fdb1bbb1e}{krpc\+\_\+object\+\_\+t} $\ast$o)
\begin{DoxyCompactList}\small\item\em 发起\+R\+P\+C调用 \end{DoxyCompactList}\item 
int \hyperlink{a00087_a5317bb571cb4d94bc56b83989c1b10c2_a5317bb571cb4d94bc56b83989c1b10c2}{krpc\+\_\+set\+\_\+encrypt\+\_\+cb} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, \hyperlink{a00051_ae41a67cc07f8dff897ca978e03b1f2d7_ae41a67cc07f8dff897ca978e03b1f2d7}{krpc\+\_\+encrypt\+\_\+t} func)
\begin{DoxyCompactList}\small\item\em 设置签名加密回调 \end{DoxyCompactList}\item 
int \hyperlink{a00087_aa75ec66092e77639ca2cf2b5ad04c5db_aa75ec66092e77639ca2cf2b5ad04c5db}{krpc\+\_\+set\+\_\+decrypt\+\_\+cb} (\hyperlink{a00051_a1e414ac6f6de24462ccf81e10f63428d_a1e414ac6f6de24462ccf81e10f63428d}{krpc\+\_\+t} $\ast$rpc, \hyperlink{a00051_a5cf750f151c90f0589f68fe8c4421f1d_a5cf750f151c90f0589f68fe8c4421f1d}{krpc\+\_\+decrypt\+\_\+t} func)
\begin{DoxyCompactList}\small\item\em 设置签名解密回调 \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{函数说明}
\hypertarget{a00087_aa12a9874d2b0308994c3fa651cdbbd61_aa12a9874d2b0308994c3fa651cdbbd61}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+add\+\_\+cb@{krpc\+\_\+add\+\_\+cb}}
\index{krpc\+\_\+add\+\_\+cb@{krpc\+\_\+add\+\_\+cb}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+add\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+add\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{uint16\+\_\+t}]{rpcid, }
\item[{{\bf krpc\+\_\+cb\+\_\+t}}]{cb}
\end{DoxyParamCaption}
)}\label{a00087_aa12a9874d2b0308994c3fa651cdbbd61_aa12a9874d2b0308994c3fa651cdbbd61}


注册\+R\+P\+C调用回调函数 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em rpcid} & 回调\+I\+D \\
\hline
{\em cb} & 回调函数指针 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00087_a51bbf2caf4916c0c08d8c8d8d86e562e_a51bbf2caf4916c0c08d8c8d8d86e562e}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+call@{krpc\+\_\+call}}
\index{krpc\+\_\+call@{krpc\+\_\+call}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+call}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+call (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{{\bf stream\+\_\+t} $\ast$}]{stream, }
\item[{uint16\+\_\+t}]{rpcid, }
\item[{{\bf krpc\+\_\+object\+\_\+t} $\ast$}]{o}
\end{DoxyParamCaption}
)}\label{a00087_a51bbf2caf4916c0c08d8c8d8d86e562e_a51bbf2caf4916c0c08d8c8d8d86e562e}


发起\+R\+P\+C调用 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em stream} & 数据流 \\
\hline
{\em rpcid} & 回调\+I\+D \\
\hline
{\em o} & 参数 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00087_a5d55f838d222f44965d99eac9a0381c1_a5d55f838d222f44965d99eac9a0381c1}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+create@{krpc\+\_\+create}}
\index{krpc\+\_\+create@{krpc\+\_\+create}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf krpc\+\_\+t}$\ast$ krpc\+\_\+create (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{a00087_a5d55f838d222f44965d99eac9a0381c1_a5d55f838d222f44965d99eac9a0381c1}


R\+P\+C框架提供了一套底层\+R\+P\+C序列化及反序列化的基础，开发者不应该直接调用这些\+A\+P\+I，应使用代码生成工具 提供的代码框架来进行\+R\+P\+C操作，生成的代码框架屏蔽了所有烦人的细节，使用起来也会比直接调用这些\+A\+P\+I更 方便. 

建立\+R\+P\+C \begin{DoxyReturn}{返回}
krpc\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00087_a76529ccab5c6f0ada79cac791e299ef9_a76529ccab5c6f0ada79cac791e299ef9}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+del\+\_\+cb@{krpc\+\_\+del\+\_\+cb}}
\index{krpc\+\_\+del\+\_\+cb@{krpc\+\_\+del\+\_\+cb}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+del\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+del\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{uint16\+\_\+t}]{rpcid}
\end{DoxyParamCaption}
)}\label{a00087_a76529ccab5c6f0ada79cac791e299ef9_a76529ccab5c6f0ada79cac791e299ef9}


删除注册过的\+R\+P\+C调用回调函数 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em rpcid} & 回调\+I\+D \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00087_ab07c8ccf1abc99b85f455a2f4280ac76_ab07c8ccf1abc99b85f455a2f4280ac76}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+destroy@{krpc\+\_\+destroy}}
\index{krpc\+\_\+destroy@{krpc\+\_\+destroy}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void krpc\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc}
\end{DoxyParamCaption}
)}\label{a00087_ab07c8ccf1abc99b85f455a2f4280ac76_ab07c8ccf1abc99b85f455a2f4280ac76}


销毁\+R\+P\+C 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00087_a7841a0b4c828efcb607a51bbdd9c9ab1_a7841a0b4c828efcb607a51bbdd9c9ab1}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+get\+\_\+cb@{krpc\+\_\+get\+\_\+cb}}
\index{krpc\+\_\+get\+\_\+cb@{krpc\+\_\+get\+\_\+cb}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+get\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}{\bf krpc\+\_\+cb\+\_\+t} krpc\+\_\+get\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{uint16\+\_\+t}]{rpcid}
\end{DoxyParamCaption}
)}\label{a00087_a7841a0b4c828efcb607a51bbdd9c9ab1_a7841a0b4c828efcb607a51bbdd9c9ab1}


取得注册过的\+R\+P\+C调用回调函数 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em rpcid} & 回调\+I\+D \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
回调函数指针 
\end{DoxyReturn}
\hypertarget{a00087_a9c94cce18fdcbb5e184af7f2ea20cceb_a9c94cce18fdcbb5e184af7f2ea20cceb}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+proc@{krpc\+\_\+proc}}
\index{krpc\+\_\+proc@{krpc\+\_\+proc}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+proc}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+proc (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{{\bf stream\+\_\+t} $\ast$}]{stream}
\end{DoxyParamCaption}
)}\label{a00087_a9c94cce18fdcbb5e184af7f2ea20cceb_a9c94cce18fdcbb5e184af7f2ea20cceb}


处理\+R\+P\+C调用，从数据流反序列化\+R\+P\+C调用，并调用回调函数 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em stream} & 数据流 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00087_aa75ec66092e77639ca2cf2b5ad04c5db_aa75ec66092e77639ca2cf2b5ad04c5db}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+set\+\_\+decrypt\+\_\+cb@{krpc\+\_\+set\+\_\+decrypt\+\_\+cb}}
\index{krpc\+\_\+set\+\_\+decrypt\+\_\+cb@{krpc\+\_\+set\+\_\+decrypt\+\_\+cb}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+set\+\_\+decrypt\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+set\+\_\+decrypt\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{{\bf krpc\+\_\+decrypt\+\_\+t}}]{func}
\end{DoxyParamCaption}
)}\label{a00087_aa75ec66092e77639ca2cf2b5ad04c5db_aa75ec66092e77639ca2cf2b5ad04c5db}


设置签名解密回调 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em func} & 回调函数指针 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00087_a5317bb571cb4d94bc56b83989c1b10c2_a5317bb571cb4d94bc56b83989c1b10c2}{}\index{rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}!krpc\+\_\+set\+\_\+encrypt\+\_\+cb@{krpc\+\_\+set\+\_\+encrypt\+\_\+cb}}
\index{krpc\+\_\+set\+\_\+encrypt\+\_\+cb@{krpc\+\_\+set\+\_\+encrypt\+\_\+cb}!rpc\+\_\+api.\+h@{rpc\+\_\+api.\+h}}
\subsubsection[{krpc\+\_\+set\+\_\+encrypt\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}int krpc\+\_\+set\+\_\+encrypt\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf krpc\+\_\+t} $\ast$}]{rpc, }
\item[{{\bf krpc\+\_\+encrypt\+\_\+t}}]{func}
\end{DoxyParamCaption}
)}\label{a00087_a5317bb571cb4d94bc56b83989c1b10c2_a5317bb571cb4d94bc56b83989c1b10c2}


设置签名加密回调 


\begin{DoxyParams}{参数}
{\em rpc} & krpc\+\_\+t实例 \\
\hline
{\em func} & 回调函数指针 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
