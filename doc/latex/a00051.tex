\hypertarget{a00051}{}\section{E\+:/knet-\/git/knet/knet/framework.c 文件参考}
\label{a00051}\index{E\+:/knet-\/git/knet/knet/framework.\+c@{E\+:/knet-\/git/knet/knet/framework.\+c}}
{\ttfamily \#include \char`\"{}framework.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}loop.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}loop\+\_\+balancer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}channel\+\_\+ref.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}framework\+\_\+raiser.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}framework\+\_\+worker.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}rpc\+\_\+api.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}list.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}misc.\+h\char`\"{}}\\*
\subsection*{结构体}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{a00013}{\+\_\+framework\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{a00051_a078a0669d562c7b17cf3116ab9ea9d72_a078a0669d562c7b17cf3116ab9ea9d72}{\+\_\+cleanup\+\_\+all\+\_\+threads} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 关闭并销毁所有线程 \end{DoxyCompactList}\item 
int \hyperlink{a00051_a4d6a26c93873119bb08c47963705593b_a4d6a26c93873119bb08c47963705593b}{\+\_\+start\+\_\+worker\+\_\+threads} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 启动工作线程 \end{DoxyCompactList}\item 
int \hyperlink{a00051_af20c94f693291564019fdc588d59d69c_af20c94f693291564019fdc588d59d69c}{\+\_\+start\+\_\+raiser\+\_\+thread} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 启动监听器/连接器发起线程 \end{DoxyCompactList}\item 
\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$ \hyperlink{a00102_ga90b29a0c500209cb9b37437a32188a40_ga90b29a0c500209cb9b37437a32188a40}{framework\+\_\+create} ()
\begin{DoxyCompactList}\small\item\em 建立框架 \end{DoxyCompactList}\item 
void \hyperlink{a00102_gad1b6cb17014bfc515f8861bad3198e22_gad1b6cb17014bfc515f8861bad3198e22}{framework\+\_\+destroy} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 销毁框架 \end{DoxyCompactList}\item 
int \hyperlink{a00102_ga23293faa7cc7d9f88ec73d4430a2355e_ga23293faa7cc7d9f88ec73d4430a2355e}{framework\+\_\+start} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 启动框架 \end{DoxyCompactList}\item 
int \hyperlink{a00102_ga5fb7151fc13ce397884a7673b4fd319b_ga5fb7151fc13ce397884a7673b4fd319b}{framework\+\_\+start\+\_\+wait} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 启动框架并等待框架关闭 \end{DoxyCompactList}\item 
int \hyperlink{a00102_ga4af709f98e2bd206da043cc29f915c99_ga4af709f98e2bd206da043cc29f915c99}{framework\+\_\+start\+\_\+wait\+\_\+destroy} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 启动框架并等待框架关闭，如果启动失败或者框架关闭则销毁 \end{DoxyCompactList}\item 
void \hyperlink{a00102_gaefec7da1b548ddb97c73c8924ba17069_gaefec7da1b548ddb97c73c8924ba17069}{framework\+\_\+wait\+\_\+for\+\_\+stop} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 等待框架停止 \end{DoxyCompactList}\item 
void \hyperlink{a00102_gada1de96de1586411c77b5357a7b2376a_gada1de96de1586411c77b5357a7b2376a}{framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 等待框架停止并销毁 \end{DoxyCompactList}\item 
int \hyperlink{a00102_ga429be76d09278d6170f1b519f4dbb689_ga429be76d09278d6170f1b519f4dbb689}{framework\+\_\+stop} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 关闭框架 \end{DoxyCompactList}\item 
\hyperlink{a00050_a55b26efa9e6ee05514d087ba2593a54b_a55b26efa9e6ee05514d087ba2593a54b}{framework\+\_\+config\+\_\+t} $\ast$ \hyperlink{a00102_gaf0524cc257c8e57ba11d676dcca6bf64_gaf0524cc257c8e57ba11d676dcca6bf64}{framework\+\_\+get\+\_\+config} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 取得框架配置 \end{DoxyCompactList}\item 
\hyperlink{a00050_a649c7e850ab247b5f70ad27e335a129d_a649c7e850ab247b5f70ad27e335a129d}{loop\+\_\+balancer\+\_\+t} $\ast$ \hyperlink{a00051_a1cd41581680bc47f0d86d625fc3234ae_a1cd41581680bc47f0d86d625fc3234ae}{framework\+\_\+get\+\_\+balancer} (\hyperlink{a00050_a6149d769f6f07ed14a40a271c95d8463_a6149d769f6f07ed14a40a271c95d8463}{framework\+\_\+t} $\ast$f)
\begin{DoxyCompactList}\small\item\em 获取负载均衡器 \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{函数说明}
\hypertarget{a00051_a078a0669d562c7b17cf3116ab9ea9d72_a078a0669d562c7b17cf3116ab9ea9d72}{}\index{framework.\+c@{framework.\+c}!\+\_\+cleanup\+\_\+all\+\_\+threads@{\+\_\+cleanup\+\_\+all\+\_\+threads}}
\index{\+\_\+cleanup\+\_\+all\+\_\+threads@{\+\_\+cleanup\+\_\+all\+\_\+threads}!framework.\+c@{framework.\+c}}
\subsubsection[{\+\_\+cleanup\+\_\+all\+\_\+threads}]{\setlength{\rightskip}{0pt plus 5cm}void \+\_\+cleanup\+\_\+all\+\_\+threads (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00051_a078a0669d562c7b17cf3116ab9ea9d72_a078a0669d562c7b17cf3116ab9ea9d72}


关闭并销毁所有线程 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00051_af20c94f693291564019fdc588d59d69c_af20c94f693291564019fdc588d59d69c}{}\index{framework.\+c@{framework.\+c}!\+\_\+start\+\_\+raiser\+\_\+thread@{\+\_\+start\+\_\+raiser\+\_\+thread}}
\index{\+\_\+start\+\_\+raiser\+\_\+thread@{\+\_\+start\+\_\+raiser\+\_\+thread}!framework.\+c@{framework.\+c}}
\subsubsection[{\+\_\+start\+\_\+raiser\+\_\+thread}]{\setlength{\rightskip}{0pt plus 5cm}int \+\_\+start\+\_\+raiser\+\_\+thread (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00051_af20c94f693291564019fdc588d59d69c_af20c94f693291564019fdc588d59d69c}


启动监听器/连接器发起线程 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00051_a4d6a26c93873119bb08c47963705593b_a4d6a26c93873119bb08c47963705593b}{}\index{framework.\+c@{framework.\+c}!\+\_\+start\+\_\+worker\+\_\+threads@{\+\_\+start\+\_\+worker\+\_\+threads}}
\index{\+\_\+start\+\_\+worker\+\_\+threads@{\+\_\+start\+\_\+worker\+\_\+threads}!framework.\+c@{framework.\+c}}
\subsubsection[{\+\_\+start\+\_\+worker\+\_\+threads}]{\setlength{\rightskip}{0pt plus 5cm}int \+\_\+start\+\_\+worker\+\_\+threads (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00051_a4d6a26c93873119bb08c47963705593b_a4d6a26c93873119bb08c47963705593b}


启动工作线程 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00102_ga90b29a0c500209cb9b37437a32188a40_ga90b29a0c500209cb9b37437a32188a40}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+create@{framework\+\_\+create}}
\index{framework\+\_\+create@{framework\+\_\+create}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf framework\+\_\+t}$\ast$ framework\+\_\+create (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{a00102_ga90b29a0c500209cb9b37437a32188a40_ga90b29a0c500209cb9b37437a32188a40}


建立框架 

\begin{DoxyReturn}{返回}
framework\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00102_gad1b6cb17014bfc515f8861bad3198e22_gad1b6cb17014bfc515f8861bad3198e22}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+destroy@{framework\+\_\+destroy}}
\index{framework\+\_\+destroy@{framework\+\_\+destroy}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void framework\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_gad1b6cb17014bfc515f8861bad3198e22_gad1b6cb17014bfc515f8861bad3198e22}


销毁框架 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00051_a1cd41581680bc47f0d86d625fc3234ae_a1cd41581680bc47f0d86d625fc3234ae}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+get\+\_\+balancer@{framework\+\_\+get\+\_\+balancer}}
\index{framework\+\_\+get\+\_\+balancer@{framework\+\_\+get\+\_\+balancer}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+get\+\_\+balancer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf loop\+\_\+balancer\+\_\+t}$\ast$ framework\+\_\+get\+\_\+balancer (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00051_a1cd41581680bc47f0d86d625fc3234ae_a1cd41581680bc47f0d86d625fc3234ae}


获取负载均衡器 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
loop\+\_\+balancer\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00102_gaf0524cc257c8e57ba11d676dcca6bf64_gaf0524cc257c8e57ba11d676dcca6bf64}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+get\+\_\+config@{framework\+\_\+get\+\_\+config}}
\index{framework\+\_\+get\+\_\+config@{framework\+\_\+get\+\_\+config}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+get\+\_\+config}]{\setlength{\rightskip}{0pt plus 5cm}{\bf framework\+\_\+config\+\_\+t}$\ast$ framework\+\_\+get\+\_\+config (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_gaf0524cc257c8e57ba11d676dcca6bf64_gaf0524cc257c8e57ba11d676dcca6bf64}


取得框架配置 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
framework\+\_\+config\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00102_ga23293faa7cc7d9f88ec73d4430a2355e_ga23293faa7cc7d9f88ec73d4430a2355e}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+start@{framework\+\_\+start}}
\index{framework\+\_\+start@{framework\+\_\+start}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+start}]{\setlength{\rightskip}{0pt plus 5cm}int framework\+\_\+start (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_ga23293faa7cc7d9f88ec73d4430a2355e_ga23293faa7cc7d9f88ec73d4430a2355e}


启动框架 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00102_ga5fb7151fc13ce397884a7673b4fd319b_ga5fb7151fc13ce397884a7673b4fd319b}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+start\+\_\+wait@{framework\+\_\+start\+\_\+wait}}
\index{framework\+\_\+start\+\_\+wait@{framework\+\_\+start\+\_\+wait}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+start\+\_\+wait}]{\setlength{\rightskip}{0pt plus 5cm}int framework\+\_\+start\+\_\+wait (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_ga5fb7151fc13ce397884a7673b4fd319b_ga5fb7151fc13ce397884a7673b4fd319b}


启动框架并等待框架关闭 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00102_ga4af709f98e2bd206da043cc29f915c99_ga4af709f98e2bd206da043cc29f915c99}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+start\+\_\+wait\+\_\+destroy@{framework\+\_\+start\+\_\+wait\+\_\+destroy}}
\index{framework\+\_\+start\+\_\+wait\+\_\+destroy@{framework\+\_\+start\+\_\+wait\+\_\+destroy}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+start\+\_\+wait\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}int framework\+\_\+start\+\_\+wait\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_ga4af709f98e2bd206da043cc29f915c99_ga4af709f98e2bd206da043cc29f915c99}


启动框架并等待框架关闭，如果启动失败或者框架关闭则销毁 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00102_ga429be76d09278d6170f1b519f4dbb689_ga429be76d09278d6170f1b519f4dbb689}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+stop@{framework\+\_\+stop}}
\index{framework\+\_\+stop@{framework\+\_\+stop}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+stop}]{\setlength{\rightskip}{0pt plus 5cm}int framework\+\_\+stop (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_ga429be76d09278d6170f1b519f4dbb689_ga429be76d09278d6170f1b519f4dbb689}


关闭框架 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00102_gaefec7da1b548ddb97c73c8924ba17069_gaefec7da1b548ddb97c73c8924ba17069}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+wait\+\_\+for\+\_\+stop@{framework\+\_\+wait\+\_\+for\+\_\+stop}}
\index{framework\+\_\+wait\+\_\+for\+\_\+stop@{framework\+\_\+wait\+\_\+for\+\_\+stop}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+wait\+\_\+for\+\_\+stop}]{\setlength{\rightskip}{0pt plus 5cm}void framework\+\_\+wait\+\_\+for\+\_\+stop (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_gaefec7da1b548ddb97c73c8924ba17069_gaefec7da1b548ddb97c73c8924ba17069}


等待框架停止 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00102_gada1de96de1586411c77b5357a7b2376a_gada1de96de1586411c77b5357a7b2376a}{}\index{framework.\+c@{framework.\+c}!framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy@{framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy}}
\index{framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy@{framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy}!framework.\+c@{framework.\+c}}
\subsubsection[{framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void framework\+\_\+wait\+\_\+for\+\_\+stop\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf framework\+\_\+t} $\ast$}]{f}
\end{DoxyParamCaption}
)}\label{a00102_gada1de96de1586411c77b5357a7b2376a_gada1de96de1586411c77b5357a7b2376a}


等待框架停止并销毁 


\begin{DoxyParams}{参数}
{\em f} & framework\+\_\+t实例 \\
\hline
\end{DoxyParams}
