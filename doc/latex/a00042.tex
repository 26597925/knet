\hypertarget{a00042}{}\section{E\+:/knet-\/git/knet/knet/channel.c 文件参考}
\label{a00042}\index{E\+:/knet-\/git/knet/knet/channel.\+c@{E\+:/knet-\/git/knet/knet/channel.\+c}}
{\ttfamily \#include \char`\"{}channel.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}buffer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}list.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ringbuffer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}loop.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}misc.\+h\char`\"{}}\\*
\subsection*{结构体}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{a00006}{\+\_\+channel\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$ \hyperlink{a00042_ac2250584fc8b99ed26a4bbe4750cce61_ac2250584fc8b99ed26a4bbe4750cce61}{channel\+\_\+create} (uint32\+\_\+t max\+\_\+send\+\_\+list\+\_\+len, uint32\+\_\+t recv\+\_\+ring\+\_\+len)
\begin{DoxyCompactList}\small\item\em 创建一个channel\+\_\+t实例 \end{DoxyCompactList}\item 
\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$ \hyperlink{a00042_a9fe31ed96008befaf02f50568b59a199_a9fe31ed96008befaf02f50568b59a199}{channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd} (\hyperlink{a00047_a0d9e0afbf02fb6ed6c5b1415dce51b05_a0d9e0afbf02fb6ed6c5b1415dce51b05}{socket\+\_\+t} socket\+\_\+fd, uint32\+\_\+t max\+\_\+send\+\_\+list\+\_\+len, uint32\+\_\+t recv\+\_\+ring\+\_\+len)
\begin{DoxyCompactList}\small\item\em 创建一个channel\+\_\+t实例 \end{DoxyCompactList}\item 
void \hyperlink{a00042_ad7e93c006b66c9fa049a4233840cda05_ad7e93c006b66c9fa049a4233840cda05}{channel\+\_\+destroy} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 销毁channel\+\_\+t实例 \end{DoxyCompactList}\item 
int \hyperlink{a00042_a86caf9eb37ca45a77045cc5e10018afb_a86caf9eb37ca45a77045cc5e10018afb}{channel\+\_\+connect} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel, const char $\ast$ip, int port)
\begin{DoxyCompactList}\small\item\em 连接监听器 \end{DoxyCompactList}\item 
int \hyperlink{a00042_a8345afe1fa7e60dd9b12304809a96a7e_a8345afe1fa7e60dd9b12304809a96a7e}{channel\+\_\+accept} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel, const char $\ast$ip, int port, int backlog)
\begin{DoxyCompactList}\small\item\em 监听 \end{DoxyCompactList}\item 
int \hyperlink{a00042_a5feb399faecad39ace64e718e9913fbe_a5feb399faecad39ace64e718e9913fbe}{channel\+\_\+send\+\_\+buffer} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel, \hyperlink{a00047_aad99a77d28bd81d3d36d0ea569c9482d_aad99a77d28bd81d3d36d0ea569c9482d}{buffer\+\_\+t} $\ast$send\+\_\+buffer)
\begin{DoxyCompactList}\small\item\em 发送 放到发送链表末尾等待适当时机发送. \end{DoxyCompactList}\item 
int \hyperlink{a00042_a455a575d389757e332028a087d701857_a455a575d389757e332028a087d701857}{channel\+\_\+send} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel, const char $\ast$data, int size)
\begin{DoxyCompactList}\small\item\em 发送 当发送链表为空的时候，会首先尝试直接发送到套接字缓冲区(zero copy)，否则会放到发送链表末尾等待 适当时机发送. \end{DoxyCompactList}\item 
int \hyperlink{a00042_a92bd8d7a98e233279f011f19f6724794_a92bd8d7a98e233279f011f19f6724794}{channel\+\_\+update\+\_\+send} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 可写事件通知 \end{DoxyCompactList}\item 
int \hyperlink{a00042_ad4aaa94d5f475b4b488ffa1e711ff1e1_ad4aaa94d5f475b4b488ffa1e711ff1e1}{channel\+\_\+update\+\_\+recv} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 可读事件通知 \end{DoxyCompactList}\item 
void \hyperlink{a00042_a44ee392afecbffb25ab7c4de4898df0d_a44ee392afecbffb25ab7c4de4898df0d}{channel\+\_\+close} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 关闭 \end{DoxyCompactList}\item 
\hyperlink{a00047_a0d9e0afbf02fb6ed6c5b1415dce51b05_a0d9e0afbf02fb6ed6c5b1415dce51b05}{socket\+\_\+t} \hyperlink{a00042_a950ec7a2a3c89032577fba60a59b1f91_a950ec7a2a3c89032577fba60a59b1f91}{channel\+\_\+get\+\_\+socket\+\_\+fd} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 取得套接字 \end{DoxyCompactList}\item 
\hyperlink{a00047_af929c5cf86b6a0f64dde407dfe60482e_af929c5cf86b6a0f64dde407dfe60482e}{ringbuffer\+\_\+t} $\ast$ \hyperlink{a00042_aa7ab12f174b1d8384b1c3ef3b15bd83b_aa7ab12f174b1d8384b1c3ef3b15bd83b}{channel\+\_\+get\+\_\+ringbuffer} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 取得读缓冲区 \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{a00042_a855f29f5cb8f5c0420af7a377bd2f531_a855f29f5cb8f5c0420af7a377bd2f531}{channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 取得发送链表最大长度限制 \end{DoxyCompactList}\item 
uint64\+\_\+t \hyperlink{a00042_af23ca0f2b9462f153a4236d787f9f25a_af23ca0f2b9462f153a4236d787f9f25a}{channel\+\_\+get\+\_\+uuid} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 获取管道\+U\+U\+I\+D \end{DoxyCompactList}\item 
int \hyperlink{a00042_a755d848b2b5d58cf883ef1b66950274c_a755d848b2b5d58cf883ef1b66950274c}{channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max} (\hyperlink{a00047_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 发送链表内缓冲区数量是否达到最大 \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{函数说明}
\hypertarget{a00042_a8345afe1fa7e60dd9b12304809a96a7e_a8345afe1fa7e60dd9b12304809a96a7e}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+accept@{channel\+\_\+accept}}
\index{channel\+\_\+accept@{channel\+\_\+accept}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+accept}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+accept (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel, }
\item[{const char $\ast$}]{ip, }
\item[{int}]{port, }
\item[{int}]{backlog}
\end{DoxyParamCaption}
)}\label{a00042_a8345afe1fa7e60dd9b12304809a96a7e_a8345afe1fa7e60dd9b12304809a96a7e}


监听 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
{\em ip} & I\+P \\
\hline
{\em port} & 端口 \\
\hline
{\em backlog} & 等待队列长度 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_a44ee392afecbffb25ab7c4de4898df0d_a44ee392afecbffb25ab7c4de4898df0d}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+close@{channel\+\_\+close}}
\index{channel\+\_\+close@{channel\+\_\+close}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+close}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+close (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_a44ee392afecbffb25ab7c4de4898df0d_a44ee392afecbffb25ab7c4de4898df0d}


关闭 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00042_a86caf9eb37ca45a77045cc5e10018afb_a86caf9eb37ca45a77045cc5e10018afb}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+connect@{channel\+\_\+connect}}
\index{channel\+\_\+connect@{channel\+\_\+connect}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+connect}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+connect (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel, }
\item[{const char $\ast$}]{ip, }
\item[{int}]{port}
\end{DoxyParamCaption}
)}\label{a00042_a86caf9eb37ca45a77045cc5e10018afb_a86caf9eb37ca45a77045cc5e10018afb}


连接监听器 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
{\em ip} & I\+P \\
\hline
{\em port} & 端口 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_ac2250584fc8b99ed26a4bbe4750cce61_ac2250584fc8b99ed26a4bbe4750cce61}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+create@{channel\+\_\+create}}
\index{channel\+\_\+create@{channel\+\_\+create}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+t}$\ast$ channel\+\_\+create (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{max\+\_\+send\+\_\+list\+\_\+len, }
\item[{uint32\+\_\+t}]{recv\+\_\+ring\+\_\+len}
\end{DoxyParamCaption}
)}\label{a00042_ac2250584fc8b99ed26a4bbe4750cce61_ac2250584fc8b99ed26a4bbe4750cce61}


创建一个channel\+\_\+t实例 


\begin{DoxyParams}{参数}
{\em max\+\_\+send\+\_\+list\+\_\+len} & 发送链表最大长度 \\
\hline
{\em recv\+\_\+ring\+\_\+len} & 接受缓冲区最大长度 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
channel\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00042_a9fe31ed96008befaf02f50568b59a199_a9fe31ed96008befaf02f50568b59a199}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd@{channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd}}
\index{channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd@{channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+t}$\ast$ channel\+\_\+create\+\_\+exist\+\_\+socket\+\_\+fd (
\begin{DoxyParamCaption}
\item[{{\bf socket\+\_\+t}}]{socket\+\_\+fd, }
\item[{uint32\+\_\+t}]{max\+\_\+send\+\_\+list\+\_\+len, }
\item[{uint32\+\_\+t}]{recv\+\_\+ring\+\_\+len}
\end{DoxyParamCaption}
)}\label{a00042_a9fe31ed96008befaf02f50568b59a199_a9fe31ed96008befaf02f50568b59a199}


创建一个channel\+\_\+t实例 


\begin{DoxyParams}{参数}
{\em socket\+\_\+fd} & 已建立的套接字 \\
\hline
{\em max\+\_\+send\+\_\+list\+\_\+len} & 发送链表最大长度 \\
\hline
{\em recv\+\_\+ring\+\_\+len} & 接受缓冲区最大长度 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
channel\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00042_ad7e93c006b66c9fa049a4233840cda05_ad7e93c006b66c9fa049a4233840cda05}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+destroy@{channel\+\_\+destroy}}
\index{channel\+\_\+destroy@{channel\+\_\+destroy}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_ad7e93c006b66c9fa049a4233840cda05_ad7e93c006b66c9fa049a4233840cda05}


销毁channel\+\_\+t实例 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00042_a855f29f5cb8f5c0420af7a377bd2f531_a855f29f5cb8f5c0420af7a377bd2f531}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len@{channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len}}
\index{channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len@{channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t channel\+\_\+get\+\_\+max\+\_\+send\+\_\+list\+\_\+len (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_a855f29f5cb8f5c0420af7a377bd2f531_a855f29f5cb8f5c0420af7a377bd2f531}


取得发送链表最大长度限制 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
发送链表最大长度限制 
\end{DoxyReturn}
\hypertarget{a00042_aa7ab12f174b1d8384b1c3ef3b15bd83b_aa7ab12f174b1d8384b1c3ef3b15bd83b}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+get\+\_\+ringbuffer@{channel\+\_\+get\+\_\+ringbuffer}}
\index{channel\+\_\+get\+\_\+ringbuffer@{channel\+\_\+get\+\_\+ringbuffer}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+get\+\_\+ringbuffer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ringbuffer\+\_\+t}$\ast$ channel\+\_\+get\+\_\+ringbuffer (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_aa7ab12f174b1d8384b1c3ef3b15bd83b_aa7ab12f174b1d8384b1c3ef3b15bd83b}


取得读缓冲区 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
ringbuffer\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00042_a950ec7a2a3c89032577fba60a59b1f91_a950ec7a2a3c89032577fba60a59b1f91}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+get\+\_\+socket\+\_\+fd@{channel\+\_\+get\+\_\+socket\+\_\+fd}}
\index{channel\+\_\+get\+\_\+socket\+\_\+fd@{channel\+\_\+get\+\_\+socket\+\_\+fd}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+get\+\_\+socket\+\_\+fd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf socket\+\_\+t} channel\+\_\+get\+\_\+socket\+\_\+fd (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_a950ec7a2a3c89032577fba60a59b1f91_a950ec7a2a3c89032577fba60a59b1f91}


取得套接字 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
套接字 
\end{DoxyReturn}
\hypertarget{a00042_af23ca0f2b9462f153a4236d787f9f25a_af23ca0f2b9462f153a4236d787f9f25a}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+get\+\_\+uuid@{channel\+\_\+get\+\_\+uuid}}
\index{channel\+\_\+get\+\_\+uuid@{channel\+\_\+get\+\_\+uuid}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+get\+\_\+uuid}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t channel\+\_\+get\+\_\+uuid (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_af23ca0f2b9462f153a4236d787f9f25a_af23ca0f2b9462f153a4236d787f9f25a}


获取管道\+U\+U\+I\+D 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
管道\+U\+U\+I\+D 
\end{DoxyReturn}
\hypertarget{a00042_a755d848b2b5d58cf883ef1b66950274c_a755d848b2b5d58cf883ef1b66950274c}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max@{channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max}}
\index{channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max@{channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+send\+\_\+list\+\_\+reach\+\_\+max (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_a755d848b2b5d58cf883ef1b66950274c_a755d848b2b5d58cf883ef1b66950274c}


发送链表内缓冲区数量是否达到最大 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em 0} & 不是 \\
\hline
{\em 非零} & 是 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_a455a575d389757e332028a087d701857_a455a575d389757e332028a087d701857}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+send@{channel\+\_\+send}}
\index{channel\+\_\+send@{channel\+\_\+send}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+send}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+send (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel, }
\item[{const char $\ast$}]{data, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\label{a00042_a455a575d389757e332028a087d701857_a455a575d389757e332028a087d701857}


发送 当发送链表为空的时候，会首先尝试直接发送到套接字缓冲区(zero copy)，否则会放到发送链表末尾等待 适当时机发送. 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
{\em data} & 发送数据指针 \\
\hline
{\em size} & 数据长度 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_a5feb399faecad39ace64e718e9913fbe_a5feb399faecad39ace64e718e9913fbe}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+send\+\_\+buffer@{channel\+\_\+send\+\_\+buffer}}
\index{channel\+\_\+send\+\_\+buffer@{channel\+\_\+send\+\_\+buffer}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+send\+\_\+buffer}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+send\+\_\+buffer (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel, }
\item[{{\bf buffer\+\_\+t} $\ast$}]{send\+\_\+buffer}
\end{DoxyParamCaption}
)}\label{a00042_a5feb399faecad39ace64e718e9913fbe_a5feb399faecad39ace64e718e9913fbe}


发送 放到发送链表末尾等待适当时机发送. 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
{\em send\+\_\+buffer} & 发送缓冲区buffer\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_ad4aaa94d5f475b4b488ffa1e711ff1e1_ad4aaa94d5f475b4b488ffa1e711ff1e1}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+update\+\_\+recv@{channel\+\_\+update\+\_\+recv}}
\index{channel\+\_\+update\+\_\+recv@{channel\+\_\+update\+\_\+recv}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+update\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+update\+\_\+recv (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_ad4aaa94d5f475b4b488ffa1e711ff1e1_ad4aaa94d5f475b4b488ffa1e711ff1e1}


可读事件通知 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00042_a92bd8d7a98e233279f011f19f6724794_a92bd8d7a98e233279f011f19f6724794}{}\index{channel.\+c@{channel.\+c}!channel\+\_\+update\+\_\+send@{channel\+\_\+update\+\_\+send}}
\index{channel\+\_\+update\+\_\+send@{channel\+\_\+update\+\_\+send}!channel.\+c@{channel.\+c}}
\subsubsection[{channel\+\_\+update\+\_\+send}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+update\+\_\+send (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00042_a92bd8d7a98e233279f011f19f6724794_a92bd8d7a98e233279f011f19f6724794}


可写事件通知 


\begin{DoxyParams}{参数}
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
