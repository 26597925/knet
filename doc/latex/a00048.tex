\hypertarget{a00048}{}\section{E\+:/knet-\/git/knet/knet/channel\+\_\+ref.h 文件参考}
\label{a00048}\index{E\+:/knet-\/git/knet/knet/channel\+\_\+ref.\+h@{E\+:/knet-\/git/knet/knet/channel\+\_\+ref.\+h}}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}channel\+\_\+ref\+\_\+api.\+h\char`\"{}}\\*
\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$ \hyperlink{a00048_a82a1514a1b492ad693c7cb28606a5d01_a82a1514a1b492ad693c7cb28606a5d01}{channel\+\_\+ref\+\_\+create} (\hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop, \hyperlink{a00050_a2effb3e20d0b7e5f6d5ac42118e0330b_a2effb3e20d0b7e5f6d5ac42118e0330b}{channel\+\_\+t} $\ast$channel)
\begin{DoxyCompactList}\small\item\em 创建管道引用 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a8c61b880489dcb1a556e3458e748d9f7_a8c61b880489dcb1a556e3458e748d9f7}{channel\+\_\+ref\+\_\+destroy} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 销毁管道引用 管道引用计数为零时才能被实际销毁 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a0688f00d64ff34ae18fd4a354d890029_a0688f00d64ff34ae18fd4a354d890029}{channel\+\_\+ref\+\_\+write} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, const char $\ast$data, int size)
\begin{DoxyCompactList}\small\item\em 写入 管道引用计数为零时才能被实际销毁 \end{DoxyCompactList}\item 
\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$ \hyperlink{a00048_a8312d0f4fcecc79d87a261e8b462ce95_a8312d0f4fcecc79d87a261e8b462ce95}{channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop, \hyperlink{a00050_a0d9e0afbf02fb6ed6c5b1415dce51b05_a0d9e0afbf02fb6ed6c5b1415dce51b05}{socket\+\_\+t} client\+\_\+fd, int event)
\begin{DoxyCompactList}\small\item\em 为通过accept()返回的套接字创建管道引用 \end{DoxyCompactList}\item 
\hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$ \hyperlink{a00048_af3fce9f1faac3773f726b1b913d42787_af3fce9f1faac3773f726b1b913d42787}{channel\+\_\+ref\+\_\+choose\+\_\+loop} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道相关联的loop\+\_\+t实例 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a98676b725d853de8a576f97e1eeb9068_a98676b725d853de8a576f97e1eeb9068}{channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a62053232bcf3566010ef98a7d77c3cc8_a62053232bcf3566010ef98a7d77c3cc8}{dlist\+\_\+node\+\_\+t} $\ast$node)
\begin{DoxyCompactList}\small\item\em 设置管道链表节点 \end{DoxyCompactList}\item 
\hyperlink{a00050_a62053232bcf3566010ef98a7d77c3cc8_a62053232bcf3566010ef98a7d77c3cc8}{dlist\+\_\+node\+\_\+t} $\ast$ \hyperlink{a00048_a814d6826477cb62c5e4d6826dfdc418e_a814d6826477cb62c5e4d6826dfdc418e}{channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道链表节点 \end{DoxyCompactList}\item 
int \hyperlink{a00048_af748fb7631166d41826187a22ef28cc4_af748fb7631166d41826187a22ef28cc4}{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 在loop\+\_\+t所运行的线程内完成连接流程 \end{DoxyCompactList}\item 
int \hyperlink{a00048_abb315a5ff9896484c78f6ca3105f98ce_abb315a5ff9896484c78f6ca3105f98ce}{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 在loop\+\_\+t所运行的线程内完成连接流程 \end{DoxyCompactList}\item 
void \hyperlink{a00048_af2b04a39619b524c176a1b921a2a662d_af2b04a39619b524c176a1b921a2a662d}{channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop} (\hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop, \hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 在loop\+\_\+t所运行的线程内完成接收新连接流程 通过负载均衡触发 \end{DoxyCompactList}\item 
void \hyperlink{a00048_acd7537431cf488ed39e782e63f79d997_acd7537431cf488ed39e782e63f79d997}{channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop} (\hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop, \hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 在loop\+\_\+t所运行的线程内完成关闭流程 通过跨线程关闭触发 \end{DoxyCompactList}\item 
void \hyperlink{a00048_ab2afcbb2288d9654f7eb656a8c242167_ab2afcbb2288d9654f7eb656a8c242167}{channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop} (\hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop, \hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_aad99a77d28bd81d3d36d0ea569c9482d_aad99a77d28bd81d3d36d0ea569c9482d}{buffer\+\_\+t} $\ast$send\+\_\+buffer)
\begin{DoxyCompactList}\small\item\em 在loop\+\_\+t所运行的线程内发送 通过跨线程发送触发 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a754666526c935285bd6c9367513b5832_a754666526c935285bd6c9367513b5832}{channel\+\_\+ref\+\_\+set\+\_\+flag} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, int flag)
\begin{DoxyCompactList}\small\item\em 设置管道自定义标志 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a684027d23ecd45142ee91678972b48da_a684027d23ecd45142ee91678972b48da}{channel\+\_\+ref\+\_\+get\+\_\+flag} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道自定义标志 \end{DoxyCompactList}\item 
void \hyperlink{a00048_aa639e4f322194aa76b0d01368f086bc0_aa639e4f322194aa76b0d01368f086bc0}{channel\+\_\+ref\+\_\+set\+\_\+data} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, void $\ast$data)
\begin{DoxyCompactList}\small\item\em 设置管道自定义数据 \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{a00048_ae6545b9c070a0bab99ccfefdf0b4a999_ae6545b9c070a0bab99ccfefdf0b4a999}{channel\+\_\+ref\+\_\+get\+\_\+data} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道自定义数据 \end{DoxyCompactList}\item 
void \hyperlink{a00048_ad7b9246a8768f761ffdd1756ea389181_ad7b9246a8768f761ffdd1756ea389181}{channel\+\_\+ref\+\_\+set\+\_\+loop} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a9c3ad1cd2de83e09f3a7b59fa82c94ee_a9c3ad1cd2de83e09f3a7b59fa82c94ee}{loop\+\_\+t} $\ast$loop)
\begin{DoxyCompactList}\small\item\em 设置管道所属（相关联）loop\+\_\+t实例 \end{DoxyCompactList}\item 
void \hyperlink{a00048_aaa459c5e4bd63d343a31b5968a3ae5bd_aaa459c5e4bd63d343a31b5968a3ae5bd}{channel\+\_\+ref\+\_\+set\+\_\+event} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a5ad43ab162fdf9ad53cde10ed3d87d99_a5ad43ab162fdf9ad53cde10ed3d87d99}{channel\+\_\+event\+\_\+e} e)
\begin{DoxyCompactList}\small\item\em 投递管道事件 \end{DoxyCompactList}\item 
\hyperlink{a00050_a5ad43ab162fdf9ad53cde10ed3d87d99_a5ad43ab162fdf9ad53cde10ed3d87d99}{channel\+\_\+event\+\_\+e} \hyperlink{a00048_ac24dbde77cfb71c60e1497dfe4cb49f3_ac24dbde77cfb71c60e1497dfe4cb49f3}{channel\+\_\+ref\+\_\+get\+\_\+event} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 获取管道已经投递的事件集合 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a08e70ed62a98136a26d326e25d1dbeac_a08e70ed62a98136a26d326e25d1dbeac}{channel\+\_\+ref\+\_\+clear\+\_\+event} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a5ad43ab162fdf9ad53cde10ed3d87d99_a5ad43ab162fdf9ad53cde10ed3d87d99}{channel\+\_\+event\+\_\+e} e)
\begin{DoxyCompactList}\small\item\em 取消管道事件 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a7134a0dab5db76d26dac56924267e5ac_a7134a0dab5db76d26dac56924267e5ac}{channel\+\_\+ref\+\_\+check\+\_\+event} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a5ad43ab162fdf9ad53cde10ed3d87d99_a5ad43ab162fdf9ad53cde10ed3d87d99}{channel\+\_\+event\+\_\+e} event)
\begin{DoxyCompactList}\small\item\em 检测是否投递了事件 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a7e19561cc06440ebdf63ced5526c9e21_a7e19561cc06440ebdf63ced5526c9e21}{channel\+\_\+ref\+\_\+set\+\_\+state} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a1956eea3012f780b5d592a9d09d9873c_a1956eea3012f780b5d592a9d09d9873c}{channel\+\_\+state\+\_\+e} state)
\begin{DoxyCompactList}\small\item\em 设置管道状态 \end{DoxyCompactList}\item 
void \hyperlink{a00048_aac9295d2423894326c8b62e0ee851f89_aac9295d2423894326c8b62e0ee851f89}{channel\+\_\+ref\+\_\+update} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a5ad43ab162fdf9ad53cde10ed3d87d99_a5ad43ab162fdf9ad53cde10ed3d87d99}{channel\+\_\+event\+\_\+e} e, time\+\_\+t ts)
\begin{DoxyCompactList}\small\item\em 管道事件通知 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a31545bffe4e0837eaf754465732642c4_a31545bffe4e0837eaf754465732642c4}{channel\+\_\+ref\+\_\+update\+\_\+accept} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 管道事件处理-\/监听到新连接请求 \end{DoxyCompactList}\item 
void \hyperlink{a00048_ac3dee255a82a9d1fb1fc3c63a2905a5a_ac3dee255a82a9d1fb1fc3c63a2905a5a}{channel\+\_\+ref\+\_\+update\+\_\+connect} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 管道事件处理-\/发起连接完成 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a1c47df1906826a2a5b6d99fbc51918d1_a1c47df1906826a2a5b6d99fbc51918d1}{channel\+\_\+ref\+\_\+update\+\_\+recv} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 管道事件处理-\/有数据可读 \end{DoxyCompactList}\item 
void \hyperlink{a00048_ae7b781b5faec09b7bd383e4e59dfb40f_ae7b781b5faec09b7bd383e4e59dfb40f}{channel\+\_\+ref\+\_\+update\+\_\+send} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 管道事件处理-\/可以发送数据 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a1f03dc2b266c99aa3189dbe02564be45_a1f03dc2b266c99aa3189dbe02564be45}{channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, time\+\_\+t ts)
\begin{DoxyCompactList}\small\item\em 检测管道发起的连接操作是否超时 \end{DoxyCompactList}\item 
int \hyperlink{a00048_ae0c46cab3e683bce5f93d07847db7ec1_ae0c46cab3e683bce5f93d07847db7ec1}{channel\+\_\+ref\+\_\+check\+\_\+timeout} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, time\+\_\+t ts)
\begin{DoxyCompactList}\small\item\em 检测管道是否空闲超时 \end{DoxyCompactList}\item 
\hyperlink{a00050_af929c5cf86b6a0f64dde407dfe60482e_af929c5cf86b6a0f64dde407dfe60482e}{ringbuffer\+\_\+t} $\ast$ \hyperlink{a00048_a7f81588a2beaa8c33a5eb7bf2236e566_a7f81588a2beaa8c33a5eb7bf2236e566}{channel\+\_\+ref\+\_\+get\+\_\+ringbuffer} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道读缓冲区 \end{DoxyCompactList}\item 
\hyperlink{a00050_ae296ec4d1ce108960de8dcc423956a1d_ae296ec4d1ce108960de8dcc423956a1d}{channel\+\_\+ref\+\_\+cb\+\_\+t} \hyperlink{a00048_a1495c5893bdd3bf7508c0d13c7a591a6_a1495c5893bdd3bf7508c0d13c7a591a6}{channel\+\_\+ref\+\_\+get\+\_\+cb} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得管道事件回调 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a31d88025a8c93858b7784ce1f89cfffe_a31d88025a8c93858b7784ce1f89cfffe}{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, \hyperlink{a00050_a62053232bcf3566010ef98a7d77c3cc8_a62053232bcf3566010ef98a7d77c3cc8}{dlist\+\_\+node\+\_\+t} $\ast$node)
\begin{DoxyCompactList}\small\item\em 设置域链表节点 \end{DoxyCompactList}\item 
\hyperlink{a00050_a62053232bcf3566010ef98a7d77c3cc8_a62053232bcf3566010ef98a7d77c3cc8}{dlist\+\_\+node\+\_\+t} $\ast$ \hyperlink{a00048_ab5e94cb95124a4c5db7ddf5750a9bb17_ab5e94cb95124a4c5db7ddf5750a9bb17}{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得域链表节点 \end{DoxyCompactList}\item 
int \hyperlink{a00048_ab71c6ed6109fedf4cf941b8de498a622_ab71c6ed6109fedf4cf941b8de498a622}{channel\+\_\+ref\+\_\+check\+\_\+share} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 检查管道引用是否通过调用channel\+\_\+ref\+\_\+share()建立 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a66387736035e1c761a9ceebf3c33d9cf_a66387736035e1c761a9ceebf3c33d9cf}{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref, uint64\+\_\+t domain\+\_\+id)
\begin{DoxyCompactList}\small\item\em 设置域\+I\+D \end{DoxyCompactList}\item 
uint64\+\_\+t \hyperlink{a00048_a8498a205a4580c25c337a33b571396f7_a8498a205a4580c25c337a33b571396f7}{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 取得域\+I\+D \end{DoxyCompactList}\item 
void \hyperlink{a00048_aef059f673946f97e8b892b600f839af1_aef059f673946f97e8b892b600f839af1}{channel\+\_\+ref\+\_\+incref} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 递增当前管道引用计数 \end{DoxyCompactList}\item 
void \hyperlink{a00048_a039d289fc9cc8550fece0cd7b154ca7c_a039d289fc9cc8550fece0cd7b154ca7c}{channel\+\_\+ref\+\_\+decref} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 递减当前管道引用计数 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a57f990b42c6d0e5f12cb8e59c18bdcf3_a57f990b42c6d0e5f12cb8e59c18bdcf3}{channel\+\_\+ref\+\_\+check\+\_\+ref} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 测试管道引用是否为零 \end{DoxyCompactList}\item 
int \hyperlink{a00048_a69e281781c5375b06a0fc8c2fdc5ea19_a69e281781c5375b06a0fc8c2fdc5ea19}{channel\+\_\+ref\+\_\+get\+\_\+ref} (\hyperlink{a00050_a151271c9d188ef28d4d24bb81dcc1263_a151271c9d188ef28d4d24bb81dcc1263}{channel\+\_\+ref\+\_\+t} $\ast$channel\+\_\+ref)
\begin{DoxyCompactList}\small\item\em 获取管道引用计数 \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{函数说明}
\hypertarget{a00048_a8312d0f4fcecc79d87a261e8b462ce95_a8312d0f4fcecc79d87a261e8b462ce95}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd@{channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd}}
\index{channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd@{channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+ref\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+accept\+\_\+from\+\_\+socket\+\_\+fd (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf loop\+\_\+t} $\ast$}]{loop, }
\item[{{\bf socket\+\_\+t}}]{client\+\_\+fd, }
\item[{int}]{event}
\end{DoxyParamCaption}
)}\label{a00048_a8312d0f4fcecc79d87a261e8b462ce95_a8312d0f4fcecc79d87a261e8b462ce95}


为通过accept()返回的套接字创建管道引用 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em loop} & loop\+\_\+t实例 \\
\hline
{\em client\+\_\+fd} & 通过accept()得到的套接字 \\
\hline
{\em event} & 是否投递事件和设置管道状态 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
channel\+\_\+ref\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_a1f03dc2b266c99aa3189dbe02564be45_a1f03dc2b266c99aa3189dbe02564be45}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout@{channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout}}
\index{channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout@{channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+check\+\_\+connect\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{time\+\_\+t}]{ts}
\end{DoxyParamCaption}
)}\label{a00048_a1f03dc2b266c99aa3189dbe02564be45_a1f03dc2b266c99aa3189dbe02564be45}


检测管道发起的连接操作是否超时 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em ts} & 当前时间戳（秒） \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em 0} & 没有超时 \\
\hline
{\em 非零} & 超时 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_a7134a0dab5db76d26dac56924267e5ac_a7134a0dab5db76d26dac56924267e5ac}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+check\+\_\+event@{channel\+\_\+ref\+\_\+check\+\_\+event}}
\index{channel\+\_\+ref\+\_\+check\+\_\+event@{channel\+\_\+ref\+\_\+check\+\_\+event}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+check\+\_\+event}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+check\+\_\+event (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf channel\+\_\+event\+\_\+e}}]{event}
\end{DoxyParamCaption}
)}\label{a00048_a7134a0dab5db76d26dac56924267e5ac_a7134a0dab5db76d26dac56924267e5ac}


检测是否投递了事件 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em event} & 管道事件 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em 0} & 没有投递 \\
\hline
{\em 非零} & 已经投递 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_a57f990b42c6d0e5f12cb8e59c18bdcf3_a57f990b42c6d0e5f12cb8e59c18bdcf3}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+check\+\_\+ref@{channel\+\_\+ref\+\_\+check\+\_\+ref}}
\index{channel\+\_\+ref\+\_\+check\+\_\+ref@{channel\+\_\+ref\+\_\+check\+\_\+ref}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+check\+\_\+ref}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+check\+\_\+ref (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a57f990b42c6d0e5f12cb8e59c18bdcf3_a57f990b42c6d0e5f12cb8e59c18bdcf3}


测试管道引用是否为零 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
0 不为零 

非零 为零 
\end{DoxyReturn}
\hypertarget{a00048_ab71c6ed6109fedf4cf941b8de498a622_ab71c6ed6109fedf4cf941b8de498a622}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+check\+\_\+share@{channel\+\_\+ref\+\_\+check\+\_\+share}}
\index{channel\+\_\+ref\+\_\+check\+\_\+share@{channel\+\_\+ref\+\_\+check\+\_\+share}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+check\+\_\+share}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+check\+\_\+share (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ab71c6ed6109fedf4cf941b8de498a622_ab71c6ed6109fedf4cf941b8de498a622}


检查管道引用是否通过调用channel\+\_\+ref\+\_\+share()建立 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em 0} & 不是 \\
\hline
{\em 非零} & 是 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_ae0c46cab3e683bce5f93d07847db7ec1_ae0c46cab3e683bce5f93d07847db7ec1}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+check\+\_\+timeout@{channel\+\_\+ref\+\_\+check\+\_\+timeout}}
\index{channel\+\_\+ref\+\_\+check\+\_\+timeout@{channel\+\_\+ref\+\_\+check\+\_\+timeout}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+check\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+check\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{time\+\_\+t}]{ts}
\end{DoxyParamCaption}
)}\label{a00048_ae0c46cab3e683bce5f93d07847db7ec1_ae0c46cab3e683bce5f93d07847db7ec1}


检测管道是否空闲超时 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em ts} & 当前时间戳（秒） \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em 0} & 没有超时 \\
\hline
{\em 非零} & 超时 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_af3fce9f1faac3773f726b1b913d42787_af3fce9f1faac3773f726b1b913d42787}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+choose\+\_\+loop@{channel\+\_\+ref\+\_\+choose\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+choose\+\_\+loop@{channel\+\_\+ref\+\_\+choose\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+choose\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}{\bf loop\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+choose\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_af3fce9f1faac3773f726b1b913d42787_af3fce9f1faac3773f726b1b913d42787}


取得管道相关联的loop\+\_\+t实例 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
loop\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_a08e70ed62a98136a26d326e25d1dbeac_a08e70ed62a98136a26d326e25d1dbeac}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+clear\+\_\+event@{channel\+\_\+ref\+\_\+clear\+\_\+event}}
\index{channel\+\_\+ref\+\_\+clear\+\_\+event@{channel\+\_\+ref\+\_\+clear\+\_\+event}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+clear\+\_\+event}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+clear\+\_\+event (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf channel\+\_\+event\+\_\+e}}]{e}
\end{DoxyParamCaption}
)}\label{a00048_a08e70ed62a98136a26d326e25d1dbeac_a08e70ed62a98136a26d326e25d1dbeac}


取消管道事件 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em e} & 管道事件 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_af748fb7631166d41826187a22ef28cc4_af748fb7631166d41826187a22ef28cc4}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_af748fb7631166d41826187a22ef28cc4_af748fb7631166d41826187a22ef28cc4}


在loop\+\_\+t所运行的线程内完成连接流程 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_abb315a5ff9896484c78f6ca3105f98ce_abb315a5ff9896484c78f6ca3105f98ce}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address@{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address}}
\index{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address@{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+connect\+\_\+in\+\_\+loop\+\_\+address (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_abb315a5ff9896484c78f6ca3105f98ce_abb315a5ff9896484c78f6ca3105f98ce}


在loop\+\_\+t所运行的线程内完成连接流程 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_a82a1514a1b492ad693c7cb28606a5d01_a82a1514a1b492ad693c7cb28606a5d01}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+create@{channel\+\_\+ref\+\_\+create}}
\index{channel\+\_\+ref\+\_\+create@{channel\+\_\+ref\+\_\+create}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+ref\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+create (
\begin{DoxyParamCaption}
\item[{{\bf loop\+\_\+t} $\ast$}]{loop, }
\item[{{\bf channel\+\_\+t} $\ast$}]{channel}
\end{DoxyParamCaption}
)}\label{a00048_a82a1514a1b492ad693c7cb28606a5d01_a82a1514a1b492ad693c7cb28606a5d01}


创建管道引用 


\begin{DoxyParams}{参数}
{\em loop} & loop\+\_\+t实例 \\
\hline
{\em channel} & channel\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
channel\+\_\+ref\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_a039d289fc9cc8550fece0cd7b154ca7c_a039d289fc9cc8550fece0cd7b154ca7c}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+decref@{channel\+\_\+ref\+\_\+decref}}
\index{channel\+\_\+ref\+\_\+decref@{channel\+\_\+ref\+\_\+decref}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+decref}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+decref (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a039d289fc9cc8550fece0cd7b154ca7c_a039d289fc9cc8550fece0cd7b154ca7c}


递减当前管道引用计数 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a8c61b880489dcb1a556e3458e748d9f7_a8c61b880489dcb1a556e3458e748d9f7}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+destroy@{channel\+\_\+ref\+\_\+destroy}}
\index{channel\+\_\+ref\+\_\+destroy@{channel\+\_\+ref\+\_\+destroy}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a8c61b880489dcb1a556e3458e748d9f7_a8c61b880489dcb1a556e3458e748d9f7}


销毁管道引用 管道引用计数为零时才能被实际销毁 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
\hypertarget{a00048_a1495c5893bdd3bf7508c0d13c7a591a6_a1495c5893bdd3bf7508c0d13c7a591a6}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+cb@{channel\+\_\+ref\+\_\+get\+\_\+cb}}
\index{channel\+\_\+ref\+\_\+get\+\_\+cb@{channel\+\_\+ref\+\_\+get\+\_\+cb}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+ref\+\_\+cb\+\_\+t} channel\+\_\+ref\+\_\+get\+\_\+cb (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a1495c5893bdd3bf7508c0d13c7a591a6_a1495c5893bdd3bf7508c0d13c7a591a6}


取得管道事件回调 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
回调函数指针 
\end{DoxyReturn}
\hypertarget{a00048_ae6545b9c070a0bab99ccfefdf0b4a999_ae6545b9c070a0bab99ccfefdf0b4a999}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+data@{channel\+\_\+ref\+\_\+get\+\_\+data}}
\index{channel\+\_\+ref\+\_\+get\+\_\+data@{channel\+\_\+ref\+\_\+get\+\_\+data}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ channel\+\_\+ref\+\_\+get\+\_\+data (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ae6545b9c070a0bab99ccfefdf0b4a999_ae6545b9c070a0bab99ccfefdf0b4a999}


取得管道自定义数据 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
自定义数据指针 
\end{DoxyReturn}
\hypertarget{a00048_a8498a205a4580c25c337a33b571396f7_a8498a205a4580c25c337a33b571396f7}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id@{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id}}
\index{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id@{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+id (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a8498a205a4580c25c337a33b571396f7_a8498a205a4580c25c337a33b571396f7}


取得域\+I\+D 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
域\+I\+D 
\end{DoxyReturn}
\hypertarget{a00048_ab5e94cb95124a4c5db7ddf5750a9bb17_ab5e94cb95124a4c5db7ddf5750a9bb17}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node@{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node}}
\index{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node@{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dlist\+\_\+node\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+get\+\_\+domain\+\_\+node (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ab5e94cb95124a4c5db7ddf5750a9bb17_ab5e94cb95124a4c5db7ddf5750a9bb17}


取得域链表节点 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
dlist\+\_\+node\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_ac24dbde77cfb71c60e1497dfe4cb49f3_ac24dbde77cfb71c60e1497dfe4cb49f3}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+event@{channel\+\_\+ref\+\_\+get\+\_\+event}}
\index{channel\+\_\+ref\+\_\+get\+\_\+event@{channel\+\_\+ref\+\_\+get\+\_\+event}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+event}]{\setlength{\rightskip}{0pt plus 5cm}{\bf channel\+\_\+event\+\_\+e} channel\+\_\+ref\+\_\+get\+\_\+event (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ac24dbde77cfb71c60e1497dfe4cb49f3_ac24dbde77cfb71c60e1497dfe4cb49f3}


获取管道已经投递的事件集合 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
管道事件集合 
\end{DoxyReturn}
\hypertarget{a00048_a684027d23ecd45142ee91678972b48da_a684027d23ecd45142ee91678972b48da}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+flag@{channel\+\_\+ref\+\_\+get\+\_\+flag}}
\index{channel\+\_\+ref\+\_\+get\+\_\+flag@{channel\+\_\+ref\+\_\+get\+\_\+flag}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+flag}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+get\+\_\+flag (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a684027d23ecd45142ee91678972b48da_a684027d23ecd45142ee91678972b48da}


取得管道自定义标志 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
自定义标志 
\end{DoxyReturn}
\hypertarget{a00048_a814d6826477cb62c5e4d6826dfdc418e_a814d6826477cb62c5e4d6826dfdc418e}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node@{channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node}}
\index{channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node@{channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dlist\+\_\+node\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+get\+\_\+loop\+\_\+node (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a814d6826477cb62c5e4d6826dfdc418e_a814d6826477cb62c5e4d6826dfdc418e}


取得管道链表节点 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
dlist\+\_\+node\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_a69e281781c5375b06a0fc8c2fdc5ea19_a69e281781c5375b06a0fc8c2fdc5ea19}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+ref@{channel\+\_\+ref\+\_\+get\+\_\+ref}}
\index{channel\+\_\+ref\+\_\+get\+\_\+ref@{channel\+\_\+ref\+\_\+get\+\_\+ref}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+ref}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+get\+\_\+ref (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a69e281781c5375b06a0fc8c2fdc5ea19_a69e281781c5375b06a0fc8c2fdc5ea19}


获取管道引用计数 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
管道引用计数 
\end{DoxyReturn}
\hypertarget{a00048_a7f81588a2beaa8c33a5eb7bf2236e566_a7f81588a2beaa8c33a5eb7bf2236e566}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+get\+\_\+ringbuffer@{channel\+\_\+ref\+\_\+get\+\_\+ringbuffer}}
\index{channel\+\_\+ref\+\_\+get\+\_\+ringbuffer@{channel\+\_\+ref\+\_\+get\+\_\+ringbuffer}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+get\+\_\+ringbuffer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ringbuffer\+\_\+t}$\ast$ channel\+\_\+ref\+\_\+get\+\_\+ringbuffer (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a7f81588a2beaa8c33a5eb7bf2236e566_a7f81588a2beaa8c33a5eb7bf2236e566}


取得管道读缓冲区 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
ringbuffer\+\_\+t实例 
\end{DoxyReturn}
\hypertarget{a00048_aef059f673946f97e8b892b600f839af1_aef059f673946f97e8b892b600f839af1}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+incref@{channel\+\_\+ref\+\_\+incref}}
\index{channel\+\_\+ref\+\_\+incref@{channel\+\_\+ref\+\_\+incref}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+incref}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+incref (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_aef059f673946f97e8b892b600f839af1_aef059f673946f97e8b892b600f839af1}


递增当前管道引用计数 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_aa639e4f322194aa76b0d01368f086bc0_aa639e4f322194aa76b0d01368f086bc0}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+data@{channel\+\_\+ref\+\_\+set\+\_\+data}}
\index{channel\+\_\+ref\+\_\+set\+\_\+data@{channel\+\_\+ref\+\_\+set\+\_\+data}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+data (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}\label{a00048_aa639e4f322194aa76b0d01368f086bc0_aa639e4f322194aa76b0d01368f086bc0}


设置管道自定义数据 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em data} & 自定义数据指针 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a66387736035e1c761a9ceebf3c33d9cf_a66387736035e1c761a9ceebf3c33d9cf}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id@{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id}}
\index{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id@{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+id (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{uint64\+\_\+t}]{domain\+\_\+id}
\end{DoxyParamCaption}
)}\label{a00048_a66387736035e1c761a9ceebf3c33d9cf_a66387736035e1c761a9ceebf3c33d9cf}


设置域\+I\+D 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em domain\+\_\+id} & 域\+I\+D \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a31d88025a8c93858b7784ce1f89cfffe_a31d88025a8c93858b7784ce1f89cfffe}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node@{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node}}
\index{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node@{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+domain\+\_\+node (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf dlist\+\_\+node\+\_\+t} $\ast$}]{node}
\end{DoxyParamCaption}
)}\label{a00048_a31d88025a8c93858b7784ce1f89cfffe_a31d88025a8c93858b7784ce1f89cfffe}


设置域链表节点 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em node} & 域链表节点 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_aaa459c5e4bd63d343a31b5968a3ae5bd_aaa459c5e4bd63d343a31b5968a3ae5bd}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+event@{channel\+\_\+ref\+\_\+set\+\_\+event}}
\index{channel\+\_\+ref\+\_\+set\+\_\+event@{channel\+\_\+ref\+\_\+set\+\_\+event}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+event}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+event (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf channel\+\_\+event\+\_\+e}}]{e}
\end{DoxyParamCaption}
)}\label{a00048_aaa459c5e4bd63d343a31b5968a3ae5bd_aaa459c5e4bd63d343a31b5968a3ae5bd}


投递管道事件 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em e} & 管道事件 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a754666526c935285bd6c9367513b5832_a754666526c935285bd6c9367513b5832}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+flag@{channel\+\_\+ref\+\_\+set\+\_\+flag}}
\index{channel\+\_\+ref\+\_\+set\+\_\+flag@{channel\+\_\+ref\+\_\+set\+\_\+flag}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+flag}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+flag (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{int}]{flag}
\end{DoxyParamCaption}
)}\label{a00048_a754666526c935285bd6c9367513b5832_a754666526c935285bd6c9367513b5832}


设置管道自定义标志 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em flag} & 自定义标志 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_ad7b9246a8768f761ffdd1756ea389181_ad7b9246a8768f761ffdd1756ea389181}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+loop@{channel\+\_\+ref\+\_\+set\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+set\+\_\+loop@{channel\+\_\+ref\+\_\+set\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf loop\+\_\+t} $\ast$}]{loop}
\end{DoxyParamCaption}
)}\label{a00048_ad7b9246a8768f761ffdd1756ea389181_ad7b9246a8768f761ffdd1756ea389181}


设置管道所属（相关联）loop\+\_\+t实例 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em loop} & loop\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a98676b725d853de8a576f97e1eeb9068_a98676b725d853de8a576f97e1eeb9068}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node@{channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node}}
\index{channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node@{channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+loop\+\_\+node (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf dlist\+\_\+node\+\_\+t} $\ast$}]{node}
\end{DoxyParamCaption}
)}\label{a00048_a98676b725d853de8a576f97e1eeb9068_a98676b725d853de8a576f97e1eeb9068}


设置管道链表节点 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em node} & 链表节点 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a7e19561cc06440ebdf63ced5526c9e21_a7e19561cc06440ebdf63ced5526c9e21}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+set\+\_\+state@{channel\+\_\+ref\+\_\+set\+\_\+state}}
\index{channel\+\_\+ref\+\_\+set\+\_\+state@{channel\+\_\+ref\+\_\+set\+\_\+state}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+set\+\_\+state}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+set\+\_\+state (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf channel\+\_\+state\+\_\+e}}]{state}
\end{DoxyParamCaption}
)}\label{a00048_a7e19561cc06440ebdf63ced5526c9e21_a7e19561cc06440ebdf63ced5526c9e21}


设置管道状态 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em state} & 管道状态 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_aac9295d2423894326c8b62e0ee851f89_aac9295d2423894326c8b62e0ee851f89}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update@{channel\+\_\+ref\+\_\+update}}
\index{channel\+\_\+ref\+\_\+update@{channel\+\_\+ref\+\_\+update}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf channel\+\_\+event\+\_\+e}}]{e, }
\item[{time\+\_\+t}]{ts}
\end{DoxyParamCaption}
)}\label{a00048_aac9295d2423894326c8b62e0ee851f89_aac9295d2423894326c8b62e0ee851f89}


管道事件通知 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em e} & 管道事件 \\
\hline
{\em ts} & 当前时间戳（秒） \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a31545bffe4e0837eaf754465732642c4_a31545bffe4e0837eaf754465732642c4}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+accept@{channel\+\_\+ref\+\_\+update\+\_\+accept}}
\index{channel\+\_\+ref\+\_\+update\+\_\+accept@{channel\+\_\+ref\+\_\+update\+\_\+accept}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+accept}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+accept (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a31545bffe4e0837eaf754465732642c4_a31545bffe4e0837eaf754465732642c4}


管道事件处理-\/监听到新连接请求 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_af2b04a39619b524c176a1b921a2a662d_af2b04a39619b524c176a1b921a2a662d}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+accept\+\_\+in\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf loop\+\_\+t} $\ast$}]{loop, }
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_af2b04a39619b524c176a1b921a2a662d_af2b04a39619b524c176a1b921a2a662d}


在loop\+\_\+t所运行的线程内完成接收新连接流程 通过负载均衡触发 


\begin{DoxyParams}{参数}
{\em loop} & loop\+\_\+t实例 \\
\hline
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_acd7537431cf488ed39e782e63f79d997_acd7537431cf488ed39e782e63f79d997}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+close\+\_\+in\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf loop\+\_\+t} $\ast$}]{loop, }
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_acd7537431cf488ed39e782e63f79d997_acd7537431cf488ed39e782e63f79d997}


在loop\+\_\+t所运行的线程内完成关闭流程 通过跨线程关闭触发 


\begin{DoxyParams}{参数}
{\em loop} & loop\+\_\+t实例 \\
\hline
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_ac3dee255a82a9d1fb1fc3c63a2905a5a_ac3dee255a82a9d1fb1fc3c63a2905a5a}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+connect@{channel\+\_\+ref\+\_\+update\+\_\+connect}}
\index{channel\+\_\+ref\+\_\+update\+\_\+connect@{channel\+\_\+ref\+\_\+update\+\_\+connect}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+connect}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+connect (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ac3dee255a82a9d1fb1fc3c63a2905a5a_ac3dee255a82a9d1fb1fc3c63a2905a5a}


管道事件处理-\/发起连接完成 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a1c47df1906826a2a5b6d99fbc51918d1_a1c47df1906826a2a5b6d99fbc51918d1}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+recv@{channel\+\_\+ref\+\_\+update\+\_\+recv}}
\index{channel\+\_\+ref\+\_\+update\+\_\+recv@{channel\+\_\+ref\+\_\+update\+\_\+recv}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+recv (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_a1c47df1906826a2a5b6d99fbc51918d1_a1c47df1906826a2a5b6d99fbc51918d1}


管道事件处理-\/有数据可读 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_ae7b781b5faec09b7bd383e4e59dfb40f_ae7b781b5faec09b7bd383e4e59dfb40f}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+send@{channel\+\_\+ref\+\_\+update\+\_\+send}}
\index{channel\+\_\+ref\+\_\+update\+\_\+send@{channel\+\_\+ref\+\_\+update\+\_\+send}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+send}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+send (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref}
\end{DoxyParamCaption}
)}\label{a00048_ae7b781b5faec09b7bd383e4e59dfb40f_ae7b781b5faec09b7bd383e4e59dfb40f}


管道事件处理-\/可以发送数据 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_ab2afcbb2288d9654f7eb656a8c242167_ab2afcbb2288d9654f7eb656a8c242167}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop}}
\index{channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop@{channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop}]{\setlength{\rightskip}{0pt plus 5cm}void channel\+\_\+ref\+\_\+update\+\_\+send\+\_\+in\+\_\+loop (
\begin{DoxyParamCaption}
\item[{{\bf loop\+\_\+t} $\ast$}]{loop, }
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{{\bf buffer\+\_\+t} $\ast$}]{send\+\_\+buffer}
\end{DoxyParamCaption}
)}\label{a00048_ab2afcbb2288d9654f7eb656a8c242167_ab2afcbb2288d9654f7eb656a8c242167}


在loop\+\_\+t所运行的线程内发送 通过跨线程发送触发 


\begin{DoxyParams}{参数}
{\em loop} & loop\+\_\+t实例 \\
\hline
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em send\+\_\+buffer} & buffer\+\_\+t实例 \\
\hline
\end{DoxyParams}
\hypertarget{a00048_a0688f00d64ff34ae18fd4a354d890029_a0688f00d64ff34ae18fd4a354d890029}{}\index{channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}!channel\+\_\+ref\+\_\+write@{channel\+\_\+ref\+\_\+write}}
\index{channel\+\_\+ref\+\_\+write@{channel\+\_\+ref\+\_\+write}!channel\+\_\+ref.\+h@{channel\+\_\+ref.\+h}}
\subsubsection[{channel\+\_\+ref\+\_\+write}]{\setlength{\rightskip}{0pt plus 5cm}int channel\+\_\+ref\+\_\+write (
\begin{DoxyParamCaption}
\item[{{\bf channel\+\_\+ref\+\_\+t} $\ast$}]{channel\+\_\+ref, }
\item[{const char $\ast$}]{data, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\label{a00048_a0688f00d64ff34ae18fd4a354d890029_a0688f00d64ff34ae18fd4a354d890029}


写入 管道引用计数为零时才能被实际销毁 


\begin{DoxyParams}{参数}
{\em channel\+\_\+ref} & channel\+\_\+ref\+\_\+t实例 \\
\hline
{\em data} & 写入数据指针 \\
\hline
{\em size} & 数据长度 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{返回值}
{\em error\+\_\+ok} & 成功 \\
\hline
{\em 其他} & 失败 \\
\hline
\end{DoxyRetVals}
