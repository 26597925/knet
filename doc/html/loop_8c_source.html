<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>knet: E:/knet-git/knet/knet/loop.c 源文件</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">knet
   &#160;<span id="projectnumber">1.4.1</span>
   </div>
   <div id="projectbrief">cross platform, light-weight, multithreading net library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="namespaces.html"><span>命名空间</span></a></li>
      <li><a href="annotated.html"><span>结构体</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>全局定义</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_885cc87fac2d91e269af0a5a959fa5f6.html">E:</a></li><li class="navelem"><a class="el" href="dir_4e74998c9a9305a116abc25fcf9a1edb.html">knet-git</a></li><li class="navelem"><a class="el" href="dir_a1c045b39f32066568ae964b52db514f.html">knet</a></li><li class="navelem"><a class="el" href="dir_f76d03789f0b12416cfffea59e2ed47d.html">knet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">loop.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="loop_8c.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, dennis wang</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *     * Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *       notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *       documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * DISCLAIMED. IN NO EVENT SHALL dennis wang BE LIABLE FOR ANY</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="config_8h.html">config.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="loop_8h.html">loop.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="list_8h.html">list.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__ref_8h.html">channel_ref.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel_8h.html">channel.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="misc_8h.html">misc.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="loop__balancer_8h.html">loop_balancer.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stream_8h.html">stream.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="logger_8h.html">logger.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="struct__loop__t.html">   35</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct__loop__t.html">_loop_t</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">   36</a></span>&#160;    <a class="code" href="struct__dlist__t.html">dlist_t</a>*              <a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>; <span class="comment">/* 活跃管道链表 */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">   37</a></span>&#160;    <a class="code" href="struct__dlist__t.html">dlist_t</a>*              <a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>;  <span class="comment">/* 已关闭管道链表 */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">   38</a></span>&#160;    <a class="code" href="struct__dlist__t.html">dlist_t</a>*              <a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>;          <span class="comment">/* 事件链表 */</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">   39</a></span>&#160;    <a class="code" href="struct__lock__t.html">lock_t</a>*               <a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>;                <span class="comment">/* 锁-事件链表*/</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">   40</a></span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*        <a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a>;      <span class="comment">/* 事件通知写管道 */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">   41</a></span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*        <a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>;        <span class="comment">/* 事件通知读管道 */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="struct__loop__t.html#aa2d38510cd70c4c599ab41e3f715b9a5">   42</a></span>&#160;    <a class="code" href="struct__loop__balancer__t.html">loop_balancer_t</a>*      <a class="code" href="struct__loop__t.html#aa2d38510cd70c4c599ab41e3f715b9a5">balancer</a>;            <span class="comment">/* 负载均衡器 */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="struct__loop__t.html#ad55031c6556322124ec04be72e3244de">   43</a></span>&#160;    <span class="keywordtype">void</span>*                 <a class="code" href="struct__loop__t.html#ad55031c6556322124ec04be72e3244de">impl</a>;                <span class="comment">/* 事件选取器实现 */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">   44</a></span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span>          <a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a>;             <span class="comment">/* 事件循环运行标志 */</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="struct__loop__t.html#a14d64ca2cf0317cc7821972647eb7b7a">   45</a></span>&#160;    <a class="code" href="config_8h.html#ad0ada5642d10ce71bdd90816182f9b79">thread_id_t</a>           <a class="code" href="struct__loop__t.html#a14d64ca2cf0317cc7821972647eb7b7a">thread_id</a>;           <span class="comment">/* 事件选取器当前运行线程ID */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">   46</a></span>&#160;    <a class="code" href="config_8h.html#a6c87150c8f33855c3427c783480fd8ba">loop_balance_option_e</a> <a class="code" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">balance_options</a>;     <span class="comment">/* 负载均衡配置 */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;};</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989d">   49</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989d">_loop_event_e</a> {</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34">   50</a></span>&#160;    <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34">loop_event_accept</a> = 1,  <span class="comment">/* 接受新连接事件 */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf">   51</a></span>&#160;    <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf">loop_event_send</a>,        <span class="comment">/* 发送事件 */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150">   52</a></span>&#160;    <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150">loop_event_close</a>,       <span class="comment">/* 关闭事件 */</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;} <a class="code" href="loop_8c.html#ab92fe4e788615cfd56530167651a8ff4">loop_event_e</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct__loop__event__t.html">   55</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__loop__event__t.html">_loop_event_t</a> {</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">   56</a></span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* <a class="code" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">channel_ref</a>; <span class="comment">/* 事件相关管道 */</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct__loop__event__t.html#a952b3a97af878839c889043391f5bc25">   57</a></span>&#160;    <a class="code" href="struct__buffer__t.html">buffer_t</a>*      <a class="code" href="struct__loop__event__t.html#a952b3a97af878839c889043391f5bc25">send_buffer</a>; <span class="comment">/* 发送缓冲区指针 */</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">   58</a></span>&#160;    <a class="code" href="loop_8c.html#ab92fe4e788615cfd56530167651a8ff4">loop_event_e</a>   <a class="code" href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">event</a>;       <span class="comment">/* 事件类型 */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;} <a class="code" href="loop_8c.html#a1095ee772017ce29dcac0987c456709e">loop_event_t</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">   61</a></span>&#160;<a class="code" href="struct__loop__event__t.html">loop_event_t</a>* <a class="code" href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">loop_event_create</a>(<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref, <a class="code" href="struct__buffer__t.html">buffer_t</a>* send_buffer, <a class="code" href="loop_8c.html#ab92fe4e788615cfd56530167651a8ff4">loop_event_e</a> e) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="struct__loop__event__t.html">loop_event_t</a>* <span class="keyword">event</span> = <a class="code" href="config_8h.html#ab079e894d07566f511f1a5046a1eefe5">create</a>(<a class="code" href="struct__loop__event__t.html">loop_event_t</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    assert(event);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">event</span>-&gt;channel_ref = channel_ref;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">event</span>-&gt;send_buffer = send_buffer;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">event</span>-&gt;event = e;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> event;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="loop_8c.html#af79be13eb9a10b31227e808c44004f53">   70</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#af79be13eb9a10b31227e808c44004f53">loop_event_destroy</a>(<a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    assert(loop_event);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a>(loop_event);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="loop_8c.html#a085fd62d7dc3e81c319a32fecefdb239">   75</a></span>&#160;<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* <a class="code" href="loop_8c.html#a085fd62d7dc3e81c319a32fecefdb239">loop_event_get_channel_ref</a>(<a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    assert(loop_event);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> loop_event-&gt;<a class="code" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">channel_ref</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="loop_8c.html#a05cd653ad4351ce81b3c6979653d3f3b">   80</a></span>&#160;<a class="code" href="struct__buffer__t.html">buffer_t</a>* <a class="code" href="loop_8c.html#a05cd653ad4351ce81b3c6979653d3f3b">loop_event_get_send_buffer</a>(<a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    assert(loop_event);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> loop_event-&gt;<a class="code" href="struct__loop__event__t.html#a952b3a97af878839c889043391f5bc25">send_buffer</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="loop_8c.html#ad74c97ed1010b1d0434269b5b01f5829">   85</a></span>&#160;<a class="code" href="loop_8c.html#ab92fe4e788615cfd56530167651a8ff4">loop_event_e</a> <a class="code" href="loop_8c.html#ad74c97ed1010b1d0434269b5b01f5829">loop_event_get_event</a>(<a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    assert(loop_event);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> loop_event-&gt;<a class="code" href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">event</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a878bf0cd280e0bd183144bb95ca4a7b1">   90</a></span>&#160;<a class="code" href="struct__loop__t.html">loop_t</a>* <a class="code" href="loop_8c.html#a878bf0cd280e0bd183144bb95ca4a7b1">loop_create</a>() {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="config_8h.html#a0d9e0afbf02fb6ed6c5b1415dce51b05">socket_t</a> pair[2] = {0}; <span class="comment">/* 事件读写描述符 */</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="struct__loop__t.html">loop_t</a>*  loop    = <a class="code" href="config_8h.html#ab079e894d07566f511f1a5046a1eefe5">create</a>(<a class="code" href="struct__loop__t.html">loop_t</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    memset(loop, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct__loop__t.html">loop_t</a>));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">/* 建立选取器实现 */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="loop_8h.html#a182ab27e7200de7cea5aa0a4aa71a519">impl_create</a>(loop)) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a>(loop);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="logger_8h.html#a2c5b6f385060b9e82d7aa34ccb8d7546">log_fatal</a>(<span class="stringliteral">&quot;loop_create() failed, reason: impl_create()&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* 建立读写描述符 */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="misc_8c.html#a64d681185ca861b010c81db7479e9e08">socket_pair</a>(pair)) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a>(loop);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="logger_8h.html#a2c5b6f385060b9e82d7aa34ccb8d7546">log_fatal</a>(<span class="stringliteral">&quot;loop_create() failed, reason: socket_pair()&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a> = <a class="code" href="list_8c.html#ac1229375358b81e2ae8fdf7a1e7dfee1">dlist_create</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a> = <a class="code" href="list_8c.html#ac1229375358b81e2ae8fdf7a1e7dfee1">dlist_create</a>();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a> = <a class="code" href="list_8c.html#ac1229375358b81e2ae8fdf7a1e7dfee1">dlist_create</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a> = <a class="code" href="misc_8c.html#a0e47279c8c752d22446932673be52e38">lock_create</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">balance_options</a> = <a class="code" href="config_8h.html#a0f82b35b603ffed92ea1a74205f10781a11dd0233ba7e160d5a1986befd9bdad1">loop_balancer_in</a> | <a class="code" href="config_8h.html#a0f82b35b603ffed92ea1a74205f10781a88af8623d2c35e3eae34ee11b15d42df">loop_balancer_out</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a> = <a class="code" href="loop_8c.html#a6879ac453ef83768ce8f8ef43a474409">loop_create_channel_exist_socket_fd</a>(loop, pair[0], 0, 0);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    assert(loop-&gt;<a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a> = <a class="code" href="loop_8c.html#a6879ac453ef83768ce8f8ef43a474409">loop_create_channel_exist_socket_fd</a>(loop, pair[1], 0, 1024 * 64);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    assert(loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="loop_8c.html#ab4f4cfdde0b598a3e8267a5ff60775ec">loop_add_channel_ref</a>(loop, loop-&gt;<a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="loop_8c.html#ab4f4cfdde0b598a3e8267a5ff60775ec">loop_add_channel_ref</a>(loop, loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="channel__ref_8c.html#a7e19561cc06440ebdf63ced5526c9e21">channel_ref_set_state</a>(loop-&gt;<a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a>, <a class="code" href="config_8h.html#a18bbc160902cdba0f52f5a3cd879b47fa32fd0ade75874b93c0b4c120d988b202">channel_state_active</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="channel__ref_8c.html#a7e19561cc06440ebdf63ced5526c9e21">channel_ref_set_state</a>(loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>, <a class="code" href="config_8h.html#a18bbc160902cdba0f52f5a3cd879b47fa32fd0ade75874b93c0b4c120d988b202">channel_state_active</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* 注册读事件 */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="channel__ref_8c.html#aaa459c5e4bd63d343a31b5968a3ae5bd">channel_ref_set_event</a>(loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>, <a class="code" href="config_8h.html#a1460362ccf3a6ba930a1a3ac2f73f3eaa79eafb3852b5c4b325b91dab91e2695d">channel_event_recv</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">/* 设置读事件回调 */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="channel__ref_8c.html#a7627dbcdb87269ef2fae5bcbbb210720">channel_ref_set_cb</a>(loop-&gt;<a class="code" href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">read_channel</a>, <a class="code" href="loop_8c.html#a970d2bf2e65270fe3d93de1e22a4d34c">loop_queue_cb</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> loop;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a921fd5e5e16a73de123e81baab187a0a">  127</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a921fd5e5e16a73de123e81baab187a0a">loop_destroy</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  node        = 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  temp        = 0;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="struct__loop__event__t.html">loop_event_t</a>*  <span class="keyword">event</span>       = 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">/* 关闭管道 */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>, node, temp) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        channel_ref = (<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="channel__ref_8c.html#acd7537431cf488ed39e782e63f79d997">channel_ref_update_close_in_loop</a>(<a class="code" href="channel__ref_8c.html#ad840fd786ca7092d528a8fc45c2e2a76">channel_ref_get_loop</a>(channel_ref), channel_ref);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">/* 销毁选取器 */</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="loop_8h.html#ae6a6b7adc5e89d55352e0d54aa603915">impl_destroy</a>(loop);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">/* 销毁已关闭管道 */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>, node, temp) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        channel_ref = (<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="channel__ref_8c.html#a8c61b880489dcb1a556e3458e748d9f7">channel_ref_destroy</a>(channel_ref);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="list_8c.html#a1808c7551ebb6dcbae569f7e784456ce">dlist_destroy</a>(loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="list_8c.html#a1808c7551ebb6dcbae569f7e784456ce">dlist_destroy</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* 销毁未处理事件 */</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>, node, temp) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keyword">event</span> = (<a class="code" href="struct__loop__event__t.html">loop_event_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a>(event);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="list_8c.html#a1808c7551ebb6dcbae569f7e784456ce">dlist_destroy</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="misc_8c.html#aba61c8c4b8ee5ec7e337ed950d680702">lock_destroy</a>(loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a>(loop);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">  156</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">loop_add_event</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    assert(loop_event);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="misc_8c.html#ad8e04f3d702d3f15868c064947d396b3">lock_lock</a>(loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="logger_8h.html#a315f98393b739fe47d2cf94ef0ffea0e">log_info</a>(<span class="stringliteral">&quot;invoke loop_add_event(), event[type:%d]&quot;</span>, loop_event-&gt;<a class="code" href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">event</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">/* 事件添加到链表尾部 */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="list_8c.html#aadf245848d5b31e84c73a6755b78b23c">dlist_add_tail_node</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>, loop_event);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="misc_8c.html#a99cf1d42527f5715b798064281e918ed">lock_unlock</a>(loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="loop_8c.html#a3857990b0f1f9e27e000b5924b88a958">loop_notify</a>(loop);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="loop_8h.html#a61e9eb6eeaaad4d1d655beba05bb8440">  167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a61e9eb6eeaaad4d1d655beba05bb8440">loop_notify_accept</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">loop_add_event</a>(loop, <a class="code" href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">loop_event_create</a>(channel_ref, 0, <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34">loop_event_accept</a>));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="loop_8h.html#ad023112870f736a601137129420a94b9">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#ad023112870f736a601137129420a94b9">loop_notify_send</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref, <a class="code" href="struct__buffer__t.html">buffer_t</a>* send_buffer) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    assert(send_buffer);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">loop_add_event</a>(loop, <a class="code" href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">loop_event_create</a>(channel_ref, send_buffer, <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf">loop_event_send</a>));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="loop_8h.html#a6c9f3ec8e93c6e7b10ebb4dcaca562d4">  180</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a6c9f3ec8e93c6e7b10ebb4dcaca562d4">loop_notify_close</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">loop_add_event</a>(loop, <a class="code" href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">loop_event_create</a>(channel_ref, 0, <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150">loop_event_close</a>));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="loop_8h.html#a970d2bf2e65270fe3d93de1e22a4d34c">  186</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a970d2bf2e65270fe3d93de1e22a4d34c">loop_queue_cb</a>(<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel, <a class="code" href="config_8h.html#aaf2cba5d4035f3d56350b59342ebf65c">channel_cb_event_e</a> e) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (e &amp; <a class="code" href="config_8h.html#a2217ac7363dbae279d056a361d122915ae7aa0d7fc417f5d1b3242e858ab23b82">channel_cb_event_recv</a>) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">/* 清空所有读到的数据 */</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="stream_8c.html#aef7f4ca2c201faf5d82a1dad4c8d7814">stream_eat_all</a>(<a class="code" href="channel__ref_8c.html#af8d2758e1e063e04512049c9a9869d5e">channel_ref_get_stream</a>(channel));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="loop_8c.html#a94a2dfa4ba7723d7face3f76ebf31e54">loop_event_process</a>(<a class="code" href="channel__ref_8c.html#ad840fd786ca7092d528a8fc45c2e2a76">channel_ref_get_loop</a>(channel));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e &amp; <a class="code" href="config_8h.html#a2217ac7363dbae279d056a361d122915a7bb5e8d7574bce246b68c022c06b91e6">channel_cb_event_close</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="loop_8c.html#a841de68dad67aba3b98d2c55d2891521">loop_check_running</a>(<a class="code" href="channel__ref_8c.html#ad840fd786ca7092d528a8fc45c2e2a76">channel_ref_get_loop</a>(channel))) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="comment">/* 连接断开, 致命错误 */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            assert(0);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="loop_8h.html#a3857990b0f1f9e27e000b5924b88a958">  199</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a3857990b0f1f9e27e000b5924b88a958">loop_notify</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">char</span> c = 1;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* 发送一个字节触发读回调  */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="misc_8c.html#a1acbefba637d7c0c3fd77355f84d4c22">socket_send</a>(<a class="code" href="channel__ref_8c.html#af0c977ef05b7e767a8ef166a8037ec8b">channel_ref_get_socket_fd</a>(loop-&gt;<a class="code" href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">notify_channel</a>), &amp;c, <span class="keyword">sizeof</span>(c));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="loop_8h.html#a94a2dfa4ba7723d7face3f76ebf31e54">  206</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a94a2dfa4ba7723d7face3f76ebf31e54">loop_event_process</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>* node       = 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>* temp       = 0;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="struct__loop__event__t.html">loop_event_t</a>* loop_event = 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="misc_8c.html#ad8e04f3d702d3f15868c064947d396b3">lock_lock</a>(loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">/* 每次读事件回调内处理整个事件链表 */</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>, node, temp) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        loop_event = (<a class="code" href="struct__loop__event__t.html">loop_event_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">switch</span>(loop_event-&gt;<a class="code" href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">event</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34">loop_event_accept</a>:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <a class="code" href="channel__ref_8c.html#af2b04a39619b524c176a1b921a2a662d">channel_ref_update_accept_in_loop</a>(loop, loop_event-&gt;<a class="code" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">channel_ref</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf">loop_event_send</a>:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <a class="code" href="channel__ref_8c.html#ab2afcbb2288d9654f7eb656a8c242167">channel_ref_update_send_in_loop</a>(loop, loop_event-&gt;<a class="code" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">channel_ref</a>, loop_event-&gt;<a class="code" href="struct__loop__event__t.html#a952b3a97af878839c889043391f5bc25">send_buffer</a>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150">loop_event_close</a>:</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <a class="code" href="channel__ref_8c.html#acd7537431cf488ed39e782e63f79d997">channel_ref_update_close_in_loop</a>(loop, loop_event-&gt;<a class="code" href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">channel_ref</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="loop_8c.html#af79be13eb9a10b31227e808c44004f53">loop_event_destroy</a>(loop_event);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="list_8c.html#a865e84612f96509282eb9735761b1106">dlist_delete</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">event_list</a>, node);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="misc_8c.html#a99cf1d42527f5715b798064281e918ed">lock_unlock</a>(loop-&gt;<a class="code" href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">lock</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a6879ac453ef83768ce8f8ef43a474409">  234</a></span>&#160;<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* <a class="code" href="loop_8c.html#a6879ac453ef83768ce8f8ef43a474409">loop_create_channel_exist_socket_fd</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="config_8h.html#a0d9e0afbf02fb6ed6c5b1415dce51b05">socket_t</a> socket_fd, uint32_t max_send_list_len, uint32_t recv_ring_len) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="channel__ref_8c.html#a82a1514a1b492ad693c7cb28606a5d01">channel_ref_create</a>(loop, <a class="code" href="channel_8c.html#a9fe31ed96008befaf02f50568b59a199">channel_create_exist_socket_fd</a>(socket_fd, max_send_list_len, recv_ring_len));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="loop__api_8h.html#ab5b73ea9a0347b431f93ebf30ecd05b5">  239</a></span>&#160;<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* <a class="code" href="loop_8c.html#ab5b73ea9a0347b431f93ebf30ecd05b5">loop_create_channel</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, uint32_t max_send_list_len, uint32_t recv_ring_len) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="channel__ref_8c.html#a82a1514a1b492ad693c7cb28606a5d01">channel_ref_create</a>(loop, <a class="code" href="channel_8c.html#ac2250584fc8b99ed26a4bbe4750cce61">channel_create</a>(max_send_list_len, recv_ring_len));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="loop_8h.html#a1a9b3ef7cb2655dbabeabeeae2f8f299">  244</a></span>&#160;<a class="code" href="config_8h.html#ad0ada5642d10ce71bdd90816182f9b79">thread_id_t</a> <a class="code" href="loop_8c.html#a1a9b3ef7cb2655dbabeabeeae2f8f299">loop_get_thread_id</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#a14d64ca2cf0317cc7821972647eb7b7a">thread_id</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a2f1994d76e46cf4855ac955ccd41d9ef">  249</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#a2f1994d76e46cf4855ac955ccd41d9ef">loop_run_once</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#a14d64ca2cf0317cc7821972647eb7b7a">thread_id</a> = <a class="code" href="misc_8c.html#aecf10907eee00ec0e807271c906a6645">thread_get_self_id</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="loop_8h.html#af6be25e4d8b08e68ad1730611fc7f15c">impl_run_once</a>(loop);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a8eb0f6c8d398c70fc5ca2292664a1187">  255</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#a8eb0f6c8d398c70fc5ca2292664a1187">loop_run</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">int</span> error = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a> = 1;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">while</span> (loop-&gt;<a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        error = <a class="code" href="loop_8c.html#a2f1994d76e46cf4855ac955ccd41d9ef">loop_run_once</a>(loop);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="config_8h.html#ad8bc998d415be9115a064a8307df0ed5a32ce41a842de240c70407e5d7d17815d">error_loop_fail</a> == error) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            loop-&gt;<a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a> = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> error;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a898c7e8ef4ff2f360a32454b2b1013de">  268</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a898c7e8ef4ff2f360a32454b2b1013de">loop_exit</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a> = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="loop_8h.html#a7c1a2360919bfff72d665f2651a8d080">  273</a></span>&#160;<a class="code" href="struct__dlist__t.html">dlist_t</a>* <a class="code" href="loop_8c.html#a7c1a2360919bfff72d665f2651a8d080">loop_get_active_list</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="loop_8h.html#a282fa587372c0abd536f46a396cd41d4">  278</a></span>&#160;<a class="code" href="struct__dlist__t.html">dlist_t</a>* <a class="code" href="loop_8c.html#a282fa587372c0abd536f46a396cd41d4">loop_get_close_list</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="loop_8h.html#ab4f4cfdde0b598a3e8267a5ff60775ec">  283</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#ab4f4cfdde0b598a3e8267a5ff60775ec">loop_add_channel_ref</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>* node = <a class="code" href="channel__ref_8c.html#a814d6826477cb62c5e4d6826dfdc418e">channel_ref_get_loop_node</a>(channel_ref);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (node) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">/* 已经加入过链表，不需要创建链表节点 */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="list_8c.html#a419689054005a74cabe8c51932505580">dlist_add_front</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>, node);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">/* 创建链表节点 */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="list_8c.html#ad9f16c04ff5534a96e7585226effba4d">dlist_add_front_node</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>, channel_ref);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">/* 设置节点 */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="channel__ref_8c.html#a98676b725d853de8a576f97e1eeb9068">channel_ref_set_loop_node</a>(channel_ref, <a class="code" href="list_8c.html#aa5e2f24e1971b89ac20f3f1258a41597">dlist_get_front</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">/* 通知选取器添加管道 */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="loop_8h.html#a27621a2037d9d1ad2f04e1b45bb63c6c">impl_add_channel_ref</a>(loop, channel_ref);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="loop_8h.html#a074c9c3a80a8a5c57b831e41395d4ef5">  300</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a074c9c3a80a8a5c57b831e41395d4ef5">loop_remove_channel_ref</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">/* 解除与当前链表关联，但不销毁节点 */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="list_8c.html#a81811e5aa6e78ba8bbfad6b065c2c06b">dlist_remove</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>, <a class="code" href="channel__ref_8c.html#a814d6826477cb62c5e4d6826dfdc418e">channel_ref_get_loop_node</a>(channel_ref));</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="loop_8h.html#aa9654f1b872059f74665506fd67c9bc5">  307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#aa9654f1b872059f74665506fd67c9bc5">loop_set_impl</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <span class="keywordtype">void</span>* impl) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    assert(impl);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#ad55031c6556322124ec04be72e3244de">impl</a> = impl;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="loop_8h.html#a0f78295541723911955dd41b71ceece1">  313</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="loop_8c.html#a0f78295541723911955dd41b71ceece1">loop_get_impl</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#ad55031c6556322124ec04be72e3244de">impl</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="loop_8h.html#a9328cf8ba2faccbf363b41e524631b75">  318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a9328cf8ba2faccbf363b41e524631b75">loop_close_channel_ref</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    assert(channel_ref);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">/* 在外层函数内套接字已经被关闭 */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">/* 从活跃链表内取出 */</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="loop_8c.html#a074c9c3a80a8a5c57b831e41395d4ef5">loop_remove_channel_ref</a>(loop, channel_ref);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">/* 加入到已关闭链表 */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="list_8c.html#a419689054005a74cabe8c51932505580">dlist_add_front</a>(loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>, <a class="code" href="channel__ref_8c.html#a814d6826477cb62c5e4d6826dfdc418e">channel_ref_get_loop_node</a>(channel_ref));</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="loop_8h.html#abedbb538c1cc8ef805dbfc0f58d80f9e">  328</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#abedbb538c1cc8ef805dbfc0f58d80f9e">loop_set_balancer</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="struct__loop__balancer__t.html">loop_balancer_t</a>* balancer) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    assert(loop); <span class="comment">/* balancer可以为0 */</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#aa2d38510cd70c4c599ab41e3f715b9a5">balancer</a> = balancer;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="loop_8h.html#a1f9df6866c80e91a620320298d199315">  333</a></span>&#160;<a class="code" href="struct__loop__balancer__t.html">loop_balancer_t</a>* <a class="code" href="loop_8c.html#a1f9df6866c80e91a620320298d199315">loop_get_balancer</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    assert(loop);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#aa2d38510cd70c4c599ab41e3f715b9a5">balancer</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="loop_8h.html#a7a6972b39402a670659621e9fa7204ce">  338</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a7a6972b39402a670659621e9fa7204ce">loop_check_timeout</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, time_t ts) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  node        = 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  temp        = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(<a class="code" href="loop_8c.html#a7c1a2360919bfff72d665f2651a8d080">loop_get_active_list</a>(loop), node, temp) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        channel_ref = (<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="channel__ref_8c.html#adddbdc58824b567334d46493decc90f8">channel_ref_check_state</a>(channel_ref, <a class="code" href="config_8h.html#a18bbc160902cdba0f52f5a3cd879b47facb41aa62d7b96cf4330a4495af2fc913">channel_state_connect</a>)) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="misc_8c.html#a8afd26cc26824e35f1ec942d2c367c2b">socket_check_send_ready</a>(<a class="code" href="channel__ref_8c.html#af0c977ef05b7e767a8ef166a8037ec8b">channel_ref_get_socket_fd</a>(channel_ref))) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="loop_8h.html#ae6d969c43313283fd7490201d637e29f">impl_event_add</a>(channel_ref, <a class="code" href="config_8h.html#a1460362ccf3a6ba930a1a3ac2f73f3eaa32b3163b91ab5ee84fdf2838f360894f">channel_event_send</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="channel__ref_8c.html#a1f03dc2b266c99aa3189dbe02564be45">channel_ref_check_connect_timeout</a>(channel_ref, ts)) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="comment">/* 连接超时 */</span>            </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="channel__ref_8c.html#a1495c5893bdd3bf7508c0d13c7a591a6">channel_ref_get_cb</a>(channel_ref)) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <a class="code" href="channel__ref_8c.html#a1495c5893bdd3bf7508c0d13c7a591a6">channel_ref_get_cb</a>(channel_ref)(channel_ref, <a class="code" href="config_8h.html#a2217ac7363dbae279d056a361d122915a153321612f03055dd40d2d3a661ee0b0">channel_cb_event_connect_timeout</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="channel__ref_8c.html#ae0c46cab3e683bce5f93d07847db7ec1">channel_ref_check_timeout</a>(channel_ref, ts)) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="comment">/* 读超时，心跳 */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="channel__ref_8c.html#a1495c5893bdd3bf7508c0d13c7a591a6">channel_ref_get_cb</a>(channel_ref)) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <a class="code" href="channel__ref_8c.html#a1495c5893bdd3bf7508c0d13c7a591a6">channel_ref_get_cb</a>(channel_ref)(channel_ref, <a class="code" href="config_8h.html#a2217ac7363dbae279d056a361d122915ad307a6d5eae25c2c76488221a9e8aa06">channel_cb_event_timeout</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="loop_8h.html#a5f61cefa251961e82fbf82b1c7dc0b6b">  365</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a5f61cefa251961e82fbf82b1c7dc0b6b">loop_check_close</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  node        = 0;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="struct__dlist__node__t.html">dlist_node_t</a>*  temp        = 0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>* channel_ref = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a>(<a class="code" href="loop_8c.html#a282fa587372c0abd536f46a396cd41d4">loop_get_close_list</a>(loop), node, temp) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        channel_ref = (<a class="code" href="struct__channel__ref__t.html">channel_ref_t</a>*)<a class="code" href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a>(node);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="config_8h.html#ad8bc998d415be9115a064a8307df0ed5a722f316dc97e835ba613f7a505992dfd">error_ok</a> == <a class="code" href="channel__ref_8c.html#a8c61b880489dcb1a556e3458e748d9f7">channel_ref_destroy</a>(channel_ref)) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="list_8c.html#a865e84612f96509282eb9735761b1106">dlist_delete</a>(<a class="code" href="loop_8c.html#a282fa587372c0abd536f46a396cd41d4">loop_get_close_list</a>(loop), node);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="loop_8h.html#a841de68dad67aba3b98d2c55d2891521">  377</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#a841de68dad67aba3b98d2c55d2891521">loop_check_running</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">running</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a6fa8f99fdc7a036fea6ca91971885e52">  381</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#a6fa8f99fdc7a036fea6ca91971885e52">loop_get_active_channel_count</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="list_8c.html#a35f789c294262cce6fb4f1e7be0feb40">dlist_get_count</a>(loop-&gt;<a class="code" href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">active_channel_list</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="loop__api_8h.html#a604184ddcd3e06bc7bfd4f1722778029">  385</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#a604184ddcd3e06bc7bfd4f1722778029">loop_get_close_channel_count</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="list_8c.html#a35f789c294262cce6fb4f1e7be0feb40">dlist_get_count</a>(loop-&gt;<a class="code" href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">close_channel_list</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="loop_8h.html#a20964027b5a498c7f206d6a04568fa11">  389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="loop_8c.html#a20964027b5a498c7f206d6a04568fa11">loop_set_balance_options</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="config_8h.html#a6c87150c8f33855c3427c783480fd8ba">loop_balance_option_e</a> options) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    loop-&gt;<a class="code" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">balance_options</a> |= options;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="loop_8h.html#a5098c33527e18f4a0bd9bc1856ce17f1">  393</a></span>&#160;<a class="code" href="config_8h.html#a6c87150c8f33855c3427c783480fd8ba">loop_balance_option_e</a> <a class="code" href="loop_8c.html#a5098c33527e18f4a0bd9bc1856ce17f1">loop_get_balance_options</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> loop-&gt;<a class="code" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">balance_options</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="loop_8h.html#aff034d62b761d4ebad97180fb55a4582">  397</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="loop_8c.html#aff034d62b761d4ebad97180fb55a4582">loop_check_balance_options</a>(<a class="code" href="struct__loop__t.html">loop_t</a>* loop, <a class="code" href="config_8h.html#a6c87150c8f33855c3427c783480fd8ba">loop_balance_option_e</a> options) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> (loop-&gt;<a class="code" href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">balance_options</a> &amp; options);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="ttc" id="struct__loop__t_html_ae2b416ad9f757f409c524301c77e4ce7"><div class="ttname"><a href="struct__loop__t.html#ae2b416ad9f757f409c524301c77e4ce7">_loop_t::read_channel</a></div><div class="ttdeci">channel_ref_t * read_channel</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00041">loop.c:41</a></div></div>
<div class="ttc" id="config_8h_html_a0f82b35b603ffed92ea1a74205f10781a88af8623d2c35e3eae34ee11b15d42df"><div class="ttname"><a href="config_8h.html#a0f82b35b603ffed92ea1a74205f10781a88af8623d2c35e3eae34ee11b15d42df">loop_balancer_out</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00154">config.h:154</a></div></div>
<div class="ttc" id="channel__ref_8c_html_ad840fd786ca7092d528a8fc45c2e2a76"><div class="ttname"><a href="channel__ref_8c.html#ad840fd786ca7092d528a8fc45c2e2a76">channel_ref_get_loop</a></div><div class="ttdeci">loop_t * channel_ref_get_loop(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00254">channel_ref.c:254</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a814d6826477cb62c5e4d6826dfdc418e"><div class="ttname"><a href="channel__ref_8c.html#a814d6826477cb62c5e4d6826dfdc418e">channel_ref_get_loop_node</a></div><div class="ttdeci">dlist_node_t * channel_ref_get_loop_node(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00264">channel_ref.c:264</a></div></div>
<div class="ttc" id="loop_8c_html_a20964027b5a498c7f206d6a04568fa11"><div class="ttname"><a href="loop_8c.html#a20964027b5a498c7f206d6a04568fa11">loop_set_balance_options</a></div><div class="ttdeci">void loop_set_balance_options(loop_t *loop, loop_balance_option_e options)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00389">loop.c:389</a></div></div>
<div class="ttc" id="loop_8h_html_ae6a6b7adc5e89d55352e0d54aa603915"><div class="ttname"><a href="loop_8h.html#ae6a6b7adc5e89d55352e0d54aa603915">impl_destroy</a></div><div class="ttdeci">void impl_destroy(loop_t *loop)</div></div>
<div class="ttc" id="loop_8c_html_ab4f4cfdde0b598a3e8267a5ff60775ec"><div class="ttname"><a href="loop_8c.html#ab4f4cfdde0b598a3e8267a5ff60775ec">loop_add_channel_ref</a></div><div class="ttdeci">void loop_add_channel_ref(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00283">loop.c:283</a></div></div>
<div class="ttc" id="loop_8c_html_a085fd62d7dc3e81c319a32fecefdb239"><div class="ttname"><a href="loop_8c.html#a085fd62d7dc3e81c319a32fecefdb239">loop_event_get_channel_ref</a></div><div class="ttdeci">channel_ref_t * loop_event_get_channel_ref(loop_event_t *loop_event)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00075">loop.c:75</a></div></div>
<div class="ttc" id="channel_8c_html_a9fe31ed96008befaf02f50568b59a199"><div class="ttname"><a href="channel_8c.html#a9fe31ed96008befaf02f50568b59a199">channel_create_exist_socket_fd</a></div><div class="ttdeci">channel_t * channel_create_exist_socket_fd(socket_t socket_fd, uint32_t max_send_list_len, uint32_t recv_ring_len)</div><div class="ttdef"><b>Definition:</b> <a href="channel_8c_source.html#l00047">channel.c:47</a></div></div>
<div class="ttc" id="loop__balancer_8h_html"><div class="ttname"><a href="loop__balancer_8h.html">loop_balancer.h</a></div></div>
<div class="ttc" id="config_8h_html_a2217ac7363dbae279d056a361d122915a153321612f03055dd40d2d3a661ee0b0"><div class="ttname"><a href="config_8h.html#a2217ac7363dbae279d056a361d122915a153321612f03055dd40d2d3a661ee0b0">channel_cb_event_connect_timeout</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00211">config.h:211</a></div></div>
<div class="ttc" id="struct__lock__t_html"><div class="ttname"><a href="struct__lock__t.html">_lock_t</a></div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00479">misc.c:479</a></div></div>
<div class="ttc" id="struct__buffer__t_html"><div class="ttname"><a href="struct__buffer__t.html">_buffer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00028">buffer.c:28</a></div></div>
<div class="ttc" id="misc_8h_html"><div class="ttname"><a href="misc_8h.html">misc.h</a></div></div>
<div class="ttc" id="list_8c_html_a8a84722d067652fd9347f0a59732ec80"><div class="ttname"><a href="list_8c.html#a8a84722d067652fd9347f0a59732ec80">dlist_node_get_data</a></div><div class="ttdeci">void * dlist_node_get_data(dlist_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00078">list.c:78</a></div></div>
<div class="ttc" id="struct__loop__t_html_aa2d38510cd70c4c599ab41e3f715b9a5"><div class="ttname"><a href="struct__loop__t.html#aa2d38510cd70c4c599ab41e3f715b9a5">_loop_t::balancer</a></div><div class="ttdeci">loop_balancer_t * balancer</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00042">loop.c:42</a></div></div>
<div class="ttc" id="config_8h_html_a1460362ccf3a6ba930a1a3ac2f73f3eaa32b3163b91ab5ee84fdf2838f360894f"><div class="ttname"><a href="config_8h.html#a1460362ccf3a6ba930a1a3ac2f73f3eaa32b3163b91ab5ee84fdf2838f360894f">channel_event_send</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00133">config.h:133</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a1f03dc2b266c99aa3189dbe02564be45"><div class="ttname"><a href="channel__ref_8c.html#a1f03dc2b266c99aa3189dbe02564be45">channel_ref_check_connect_timeout</a></div><div class="ttdeci">int channel_ref_check_connect_timeout(channel_ref_t *channel_ref, time_t ts)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00502">channel_ref.c:502</a></div></div>
<div class="ttc" id="config_8h_html_a2217ac7363dbae279d056a361d122915ae7aa0d7fc417f5d1b3242e858ab23b82"><div class="ttname"><a href="config_8h.html#a2217ac7363dbae279d056a361d122915ae7aa0d7fc417f5d1b3242e858ab23b82">channel_cb_event_recv</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00207">config.h:207</a></div></div>
<div class="ttc" id="loop_8c_html_ab5b73ea9a0347b431f93ebf30ecd05b5"><div class="ttname"><a href="loop_8c.html#ab5b73ea9a0347b431f93ebf30ecd05b5">loop_create_channel</a></div><div class="ttdeci">channel_ref_t * loop_create_channel(loop_t *loop, uint32_t max_send_list_len, uint32_t recv_ring_len)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00239">loop.c:239</a></div></div>
<div class="ttc" id="list_8c_html_aadf245848d5b31e84c73a6755b78b23c"><div class="ttname"><a href="list_8c.html#aadf245848d5b31e84c73a6755b78b23c">dlist_add_tail_node</a></div><div class="ttdeci">dlist_node_t * dlist_add_tail_node(dlist_t *dlist, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00150">list.c:150</a></div></div>
<div class="ttc" id="misc_8c_html_ad8e04f3d702d3f15868c064947d396b3"><div class="ttname"><a href="misc_8c.html#ad8e04f3d702d3f15868c064947d396b3">lock_lock</a></div><div class="ttdeci">void lock_lock(lock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00512">misc.c:512</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a7e19561cc06440ebdf63ced5526c9e21"><div class="ttname"><a href="channel__ref_8c.html#a7e19561cc06440ebdf63ced5526c9e21">channel_ref_set_state</a></div><div class="ttdeci">void channel_ref_set_state(channel_ref_t *channel_ref, channel_state_e state)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00286">channel_ref.c:286</a></div></div>
<div class="ttc" id="loop_8c_html_ad74c97ed1010b1d0434269b5b01f5829"><div class="ttname"><a href="loop_8c.html#ad74c97ed1010b1d0434269b5b01f5829">loop_event_get_event</a></div><div class="ttdeci">loop_event_e loop_event_get_event(loop_event_t *loop_event)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00085">loop.c:85</a></div></div>
<div class="ttc" id="loop_8c_html_a878bf0cd280e0bd183144bb95ca4a7b1"><div class="ttname"><a href="loop_8c.html#a878bf0cd280e0bd183144bb95ca4a7b1">loop_create</a></div><div class="ttdeci">loop_t * loop_create()</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00090">loop.c:90</a></div></div>
<div class="ttc" id="misc_8c_html_a8afd26cc26824e35f1ec942d2c367c2b"><div class="ttname"><a href="misc_8c.html#a8afd26cc26824e35f1ec942d2c367c2b">socket_check_send_ready</a></div><div class="ttdeci">int socket_check_send_ready(socket_t socket_fd)</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00223">misc.c:223</a></div></div>
<div class="ttc" id="struct__loop__event__t_html_a636055ba7fb0edbbec2869e8191614eb"><div class="ttname"><a href="struct__loop__event__t.html#a636055ba7fb0edbbec2869e8191614eb">_loop_event_t::event</a></div><div class="ttdeci">loop_event_e event</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00058">loop.c:58</a></div></div>
<div class="ttc" id="struct__loop__event__t_html_a952b3a97af878839c889043391f5bc25"><div class="ttname"><a href="struct__loop__event__t.html#a952b3a97af878839c889043391f5bc25">_loop_event_t::send_buffer</a></div><div class="ttdeci">buffer_t * send_buffer</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00057">loop.c:57</a></div></div>
<div class="ttc" id="loop_8c_html_a1697e4a52238e6e4512caac6c34b9abb"><div class="ttname"><a href="loop_8c.html#a1697e4a52238e6e4512caac6c34b9abb">loop_add_event</a></div><div class="ttdeci">void loop_add_event(loop_t *loop, loop_event_t *loop_event)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00156">loop.c:156</a></div></div>
<div class="ttc" id="config_8h_html_a1460362ccf3a6ba930a1a3ac2f73f3eaa79eafb3852b5c4b325b91dab91e2695d"><div class="ttname"><a href="config_8h.html#a1460362ccf3a6ba930a1a3ac2f73f3eaa79eafb3852b5c4b325b91dab91e2695d">channel_event_recv</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00132">config.h:132</a></div></div>
<div class="ttc" id="struct__loop__t_html_a14d64ca2cf0317cc7821972647eb7b7a"><div class="ttname"><a href="struct__loop__t.html#a14d64ca2cf0317cc7821972647eb7b7a">_loop_t::thread_id</a></div><div class="ttdeci">thread_id_t thread_id</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00045">loop.c:45</a></div></div>
<div class="ttc" id="list_8c_html_a35f789c294262cce6fb4f1e7be0feb40"><div class="ttname"><a href="list_8c.html#a35f789c294262cce6fb4f1e7be0feb40">dlist_get_count</a></div><div class="ttdeci">int dlist_get_count(dlist_t *dlist)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00160">list.c:160</a></div></div>
<div class="ttc" id="list_8c_html_a81811e5aa6e78ba8bbfad6b065c2c06b"><div class="ttname"><a href="list_8c.html#a81811e5aa6e78ba8bbfad6b065c2c06b">dlist_remove</a></div><div class="ttdeci">dlist_node_t * dlist_remove(dlist_t *dlist, dlist_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00170">list.c:170</a></div></div>
<div class="ttc" id="struct__loop__t_html_ad55031c6556322124ec04be72e3244de"><div class="ttname"><a href="struct__loop__t.html#ad55031c6556322124ec04be72e3244de">_loop_t::impl</a></div><div class="ttdeci">void * impl</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00043">loop.c:43</a></div></div>
<div class="ttc" id="logger_8h_html_a315f98393b739fe47d2cf94ef0ffea0e"><div class="ttname"><a href="logger_8h.html#a315f98393b739fe47d2cf94ef0ffea0e">log_info</a></div><div class="ttdeci">#define log_info(format, args...)</div><div class="ttdef"><b>Definition:</b> <a href="logger_8h_source.html#l00097">logger.h:97</a></div></div>
<div class="ttc" id="config_8h_html"><div class="ttname"><a href="config_8h.html">config.h</a></div></div>
<div class="ttc" id="misc_8c_html_aba61c8c4b8ee5ec7e337ed950d680702"><div class="ttname"><a href="misc_8c.html#aba61c8c4b8ee5ec7e337ed950d680702">lock_destroy</a></div><div class="ttdeci">void lock_destroy(lock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00502">misc.c:502</a></div></div>
<div class="ttc" id="loop_8c_html_a7c1a2360919bfff72d665f2651a8d080"><div class="ttname"><a href="loop_8c.html#a7c1a2360919bfff72d665f2651a8d080">loop_get_active_list</a></div><div class="ttdeci">dlist_t * loop_get_active_list(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00273">loop.c:273</a></div></div>
<div class="ttc" id="loop_8c_html_a282fa587372c0abd536f46a396cd41d4"><div class="ttname"><a href="loop_8c.html#a282fa587372c0abd536f46a396cd41d4">loop_get_close_list</a></div><div class="ttdeci">dlist_t * loop_get_close_list(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00278">loop.c:278</a></div></div>
<div class="ttc" id="config_8h_html_a2217ac7363dbae279d056a361d122915ad307a6d5eae25c2c76488221a9e8aa06"><div class="ttname"><a href="config_8h.html#a2217ac7363dbae279d056a361d122915ad307a6d5eae25c2c76488221a9e8aa06">channel_cb_event_timeout</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00210">config.h:210</a></div></div>
<div class="ttc" id="config_8h_html_a6c87150c8f33855c3427c783480fd8ba"><div class="ttname"><a href="config_8h.html#a6c87150c8f33855c3427c783480fd8ba">loop_balance_option_e</a></div><div class="ttdeci">enum _loop_balance_option_e loop_balance_option_e</div></div>
<div class="ttc" id="loop_8h_html_a27621a2037d9d1ad2f04e1b45bb63c6c"><div class="ttname"><a href="loop_8h.html#a27621a2037d9d1ad2f04e1b45bb63c6c">impl_add_channel_ref</a></div><div class="ttdeci">int impl_add_channel_ref(loop_t *loop, channel_ref_t *channel_ref)</div></div>
<div class="ttc" id="channel_8c_html_ac2250584fc8b99ed26a4bbe4750cce61"><div class="ttname"><a href="channel_8c.html#ac2250584fc8b99ed26a4bbe4750cce61">channel_create</a></div><div class="ttdeci">channel_t * channel_create(uint32_t max_send_list_len, uint32_t recv_ring_len)</div><div class="ttdef"><b>Definition:</b> <a href="channel_8c_source.html#l00041">channel.c:41</a></div></div>
<div class="ttc" id="loop_8c_html_a5f61cefa251961e82fbf82b1c7dc0b6b"><div class="ttname"><a href="loop_8c.html#a5f61cefa251961e82fbf82b1c7dc0b6b">loop_check_close</a></div><div class="ttdeci">void loop_check_close(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00365">loop.c:365</a></div></div>
<div class="ttc" id="loop_8c_html_a5098c33527e18f4a0bd9bc1856ce17f1"><div class="ttname"><a href="loop_8c.html#a5098c33527e18f4a0bd9bc1856ce17f1">loop_get_balance_options</a></div><div class="ttdeci">loop_balance_option_e loop_get_balance_options(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00393">loop.c:393</a></div></div>
<div class="ttc" id="misc_8c_html_a64d681185ca861b010c81db7479e9e08"><div class="ttname"><a href="misc_8c.html#a64d681185ca861b010c81db7479e9e08">socket_pair</a></div><div class="ttdeci">int socket_pair(socket_t pair[2])</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00312">misc.c:312</a></div></div>
<div class="ttc" id="config_8h_html_ad0ada5642d10ce71bdd90816182f9b79"><div class="ttname"><a href="config_8h.html#ad0ada5642d10ce71bdd90816182f9b79">thread_id_t</a></div><div class="ttdeci">#define thread_id_t</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00081">config.h:81</a></div></div>
<div class="ttc" id="struct__dlist__node__t_html"><div class="ttname"><a href="struct__dlist__node__t.html">_dlist_node_t</a></div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00031">list.c:31</a></div></div>
<div class="ttc" id="loop_8c_html_a7a6972b39402a670659621e9fa7204ce"><div class="ttname"><a href="loop_8c.html#a7a6972b39402a670659621e9fa7204ce">loop_check_timeout</a></div><div class="ttdeci">void loop_check_timeout(loop_t *loop, time_t ts)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00338">loop.c:338</a></div></div>
<div class="ttc" id="loop_8c_html_a1a9b3ef7cb2655dbabeabeeae2f8f299"><div class="ttname"><a href="loop_8c.html#a1a9b3ef7cb2655dbabeabeeae2f8f299">loop_get_thread_id</a></div><div class="ttdeci">thread_id_t loop_get_thread_id(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00244">loop.c:244</a></div></div>
<div class="ttc" id="stream_8h_html"><div class="ttname"><a href="stream_8h.html">stream.h</a></div></div>
<div class="ttc" id="loop_8c_html_ad023112870f736a601137129420a94b9"><div class="ttname"><a href="loop_8c.html#ad023112870f736a601137129420a94b9">loop_notify_send</a></div><div class="ttdeci">void loop_notify_send(loop_t *loop, channel_ref_t *channel_ref, buffer_t *send_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00173">loop.c:173</a></div></div>
<div class="ttc" id="loop_8h_html"><div class="ttname"><a href="loop_8h.html">loop.h</a></div></div>
<div class="ttc" id="list_8c_html_ac1229375358b81e2ae8fdf7a1e7dfee1"><div class="ttname"><a href="list_8c.html#ac1229375358b81e2ae8fdf7a1e7dfee1">dlist_create</a></div><div class="ttdeci">dlist_t * dlist_create()</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00083">list.c:83</a></div></div>
<div class="ttc" id="config_8h_html_a0d9e0afbf02fb6ed6c5b1415dce51b05"><div class="ttname"><a href="config_8h.html#a0d9e0afbf02fb6ed6c5b1415dce51b05">socket_t</a></div><div class="ttdeci">#define socket_t</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00082">config.h:82</a></div></div>
<div class="ttc" id="channel__ref_8c_html_af8d2758e1e063e04512049c9a9869d5e"><div class="ttname"><a href="channel__ref_8c.html#af8d2758e1e063e04512049c9a9869d5e">channel_ref_get_stream</a></div><div class="ttdeci">stream_t * channel_ref_get_stream(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00249">channel_ref.c:249</a></div></div>
<div class="ttc" id="loop_8c_html_a05cd653ad4351ce81b3c6979653d3f3b"><div class="ttname"><a href="loop_8c.html#a05cd653ad4351ce81b3c6979653d3f3b">loop_event_get_send_buffer</a></div><div class="ttdeci">buffer_t * loop_event_get_send_buffer(loop_event_t *loop_event)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00080">loop.c:80</a></div></div>
<div class="ttc" id="loop_8c_html_aff034d62b761d4ebad97180fb55a4582"><div class="ttname"><a href="loop_8c.html#aff034d62b761d4ebad97180fb55a4582">loop_check_balance_options</a></div><div class="ttdeci">int loop_check_balance_options(loop_t *loop, loop_balance_option_e options)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00397">loop.c:397</a></div></div>
<div class="ttc" id="config_8h_html_ab079e894d07566f511f1a5046a1eefe5"><div class="ttname"><a href="config_8h.html#ab079e894d07566f511f1a5046a1eefe5">create</a></div><div class="ttdeci">#define create(type)</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00095">config.h:95</a></div></div>
<div class="ttc" id="list_8c_html_aa5e2f24e1971b89ac20f3f1258a41597"><div class="ttname"><a href="list_8c.html#aa5e2f24e1971b89ac20f3f1258a41597">dlist_get_front</a></div><div class="ttdeci">dlist_node_t * dlist_get_front(dlist_t *dlist)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00199">list.c:199</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a82a1514a1b492ad693c7cb28606a5d01"><div class="ttname"><a href="channel__ref_8c.html#a82a1514a1b492ad693c7cb28606a5d01">channel_ref_create</a></div><div class="ttdeci">channel_ref_t * channel_ref_create(loop_t *loop, channel_t *channel)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00064">channel_ref.c:64</a></div></div>
<div class="ttc" id="config_8h_html_a18bbc160902cdba0f52f5a3cd879b47fa32fd0ade75874b93c0b4c120d988b202"><div class="ttname"><a href="config_8h.html#a18bbc160902cdba0f52f5a3cd879b47fa32fd0ade75874b93c0b4c120d988b202">channel_state_active</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00141">config.h:141</a></div></div>
<div class="ttc" id="struct__loop__t_html"><div class="ttname"><a href="struct__loop__t.html">_loop_t</a></div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00035">loop.c:35</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="channel_8h.html">channel.h</a></div></div>
<div class="ttc" id="channel__ref_8c_html_af0c977ef05b7e767a8ef166a8037ec8b"><div class="ttname"><a href="channel__ref_8c.html#af0c977ef05b7e767a8ef166a8037ec8b">channel_ref_get_socket_fd</a></div><div class="ttdeci">socket_t channel_ref_get_socket_fd(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00244">channel_ref.c:244</a></div></div>
<div class="ttc" id="loop_8c_html_a94a2dfa4ba7723d7face3f76ebf31e54"><div class="ttname"><a href="loop_8c.html#a94a2dfa4ba7723d7face3f76ebf31e54">loop_event_process</a></div><div class="ttdeci">void loop_event_process(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00206">loop.c:206</a></div></div>
<div class="ttc" id="struct__loop__event__t_html_ae824bc2e5f0851cf77fdfaf0804105f8"><div class="ttname"><a href="struct__loop__event__t.html#ae824bc2e5f0851cf77fdfaf0804105f8">_loop_event_t::channel_ref</a></div><div class="ttdeci">channel_ref_t * channel_ref</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00056">loop.c:56</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a8c61b880489dcb1a556e3458e748d9f7"><div class="ttname"><a href="channel__ref_8c.html#a8c61b880489dcb1a556e3458e748d9f7">channel_ref_destroy</a></div><div class="ttdeci">int channel_ref_destroy(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00080">channel_ref.c:80</a></div></div>
<div class="ttc" id="loop_8c_html_a0f78295541723911955dd41b71ceece1"><div class="ttname"><a href="loop_8c.html#a0f78295541723911955dd41b71ceece1">loop_get_impl</a></div><div class="ttdeci">void * loop_get_impl(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00313">loop.c:313</a></div></div>
<div class="ttc" id="loop_8c_html_a3857990b0f1f9e27e000b5924b88a958"><div class="ttname"><a href="loop_8c.html#a3857990b0f1f9e27e000b5924b88a958">loop_notify</a></div><div class="ttdeci">void loop_notify(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00199">loop.c:199</a></div></div>
<div class="ttc" id="loop_8c_html_a921fd5e5e16a73de123e81baab187a0a"><div class="ttname"><a href="loop_8c.html#a921fd5e5e16a73de123e81baab187a0a">loop_destroy</a></div><div class="ttdeci">void loop_destroy(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00127">loop.c:127</a></div></div>
<div class="ttc" id="channel__ref_8c_html_ab2afcbb2288d9654f7eb656a8c242167"><div class="ttname"><a href="channel__ref_8c.html#ab2afcbb2288d9654f7eb656a8c242167">channel_ref_update_send_in_loop</a></div><div class="ttdeci">void channel_ref_update_send_in_loop(loop_t *loop, channel_ref_t *channel_ref, buffer_t *send_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00190">channel_ref.c:190</a></div></div>
<div class="ttc" id="channel__ref_8c_html_ae0c46cab3e683bce5f93d07847db7ec1"><div class="ttname"><a href="channel__ref_8c.html#ae0c46cab3e683bce5f93d07847db7ec1">channel_ref_check_timeout</a></div><div class="ttdeci">int channel_ref_check_timeout(channel_ref_t *channel_ref, time_t ts)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00512">channel_ref.c:512</a></div></div>
<div class="ttc" id="misc_8c_html_a1acbefba637d7c0c3fd77355f84d4c22"><div class="ttname"><a href="misc_8c.html#a1acbefba637d7c0c3fd77355f84d4c22">socket_send</a></div><div class="ttdeci">int socket_send(socket_t socket_fd, const char *data, uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00241">misc.c:241</a></div></div>
<div class="ttc" id="loop_8c_html_af79be13eb9a10b31227e808c44004f53"><div class="ttname"><a href="loop_8c.html#af79be13eb9a10b31227e808c44004f53">loop_event_destroy</a></div><div class="ttdeci">void loop_event_destroy(loop_event_t *loop_event)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00070">loop.c:70</a></div></div>
<div class="ttc" id="list_8h_html"><div class="ttname"><a href="list_8h.html">list.h</a></div></div>
<div class="ttc" id="stream_8c_html_aef7f4ca2c201faf5d82a1dad4c8d7814"><div class="ttname"><a href="stream_8c.html#aef7f4ca2c201faf5d82a1dad4c8d7814">stream_eat_all</a></div><div class="ttdeci">int stream_eat_all(stream_t *stream)</div><div class="ttdef"><b>Definition:</b> <a href="stream_8c_source.html#l00067">stream.c:67</a></div></div>
<div class="ttc" id="loop_8c_html_a1095ee772017ce29dcac0987c456709e"><div class="ttname"><a href="loop_8c.html#a1095ee772017ce29dcac0987c456709e">loop_event_t</a></div><div class="ttdeci">struct _loop_event_t loop_event_t</div></div>
<div class="ttc" id="loop_8c_html_a9328cf8ba2faccbf363b41e524631b75"><div class="ttname"><a href="loop_8c.html#a9328cf8ba2faccbf363b41e524631b75">loop_close_channel_ref</a></div><div class="ttdeci">void loop_close_channel_ref(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00318">loop.c:318</a></div></div>
<div class="ttc" id="struct__loop__t_html_af1f449cc09f8d36befcce07bc38c29c0"><div class="ttname"><a href="struct__loop__t.html#af1f449cc09f8d36befcce07bc38c29c0">_loop_t::running</a></div><div class="ttdeci">volatile int running</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00044">loop.c:44</a></div></div>
<div class="ttc" id="struct__loop__t_html_a66deffb2eaaf50c8a6b832feeecd39e1"><div class="ttname"><a href="struct__loop__t.html#a66deffb2eaaf50c8a6b832feeecd39e1">_loop_t::active_channel_list</a></div><div class="ttdeci">dlist_t * active_channel_list</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00036">loop.c:36</a></div></div>
<div class="ttc" id="loop_8c_html_a19ff97cc6f736cb864d4e4b6ca60989d"><div class="ttname"><a href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989d">_loop_event_e</a></div><div class="ttdeci">_loop_event_e</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00049">loop.c:49</a></div></div>
<div class="ttc" id="channel__ref_8c_html_acd7537431cf488ed39e782e63f79d997"><div class="ttname"><a href="channel__ref_8c.html#acd7537431cf488ed39e782e63f79d997">channel_ref_update_close_in_loop</a></div><div class="ttdeci">void channel_ref_update_close_in_loop(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00159">channel_ref.c:159</a></div></div>
<div class="ttc" id="loop_8c_html_ab92fe4e788615cfd56530167651a8ff4"><div class="ttname"><a href="loop_8c.html#ab92fe4e788615cfd56530167651a8ff4">loop_event_e</a></div><div class="ttdeci">enum _loop_event_e loop_event_e</div></div>
<div class="ttc" id="list_8c_html_a1808c7551ebb6dcbae569f7e784456ce"><div class="ttname"><a href="list_8c.html#a1808c7551ebb6dcbae569f7e784456ce">dlist_destroy</a></div><div class="ttdeci">void dlist_destroy(dlist_t *dlist)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00107">list.c:107</a></div></div>
<div class="ttc" id="struct__channel__ref__t_html"><div class="ttname"><a href="struct__channel__ref__t.html">_channel_ref_t</a></div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00057">channel_ref.c:57</a></div></div>
<div class="ttc" id="loop_8c_html_a970d2bf2e65270fe3d93de1e22a4d34c"><div class="ttname"><a href="loop_8c.html#a970d2bf2e65270fe3d93de1e22a4d34c">loop_queue_cb</a></div><div class="ttdeci">void loop_queue_cb(channel_ref_t *channel, channel_cb_event_e e)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00186">loop.c:186</a></div></div>
<div class="ttc" id="list_8c_html_a865e84612f96509282eb9735761b1106"><div class="ttname"><a href="list_8c.html#a865e84612f96509282eb9735761b1106">dlist_delete</a></div><div class="ttdeci">void dlist_delete(dlist_t *dlist, dlist_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00182">list.c:182</a></div></div>
<div class="ttc" id="channel__ref_8h_html"><div class="ttname"><a href="channel__ref_8h.html">channel_ref.h</a></div></div>
<div class="ttc" id="loop_8c_html_a6fa8f99fdc7a036fea6ca91971885e52"><div class="ttname"><a href="loop_8c.html#a6fa8f99fdc7a036fea6ca91971885e52">loop_get_active_channel_count</a></div><div class="ttdeci">int loop_get_active_channel_count(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00381">loop.c:381</a></div></div>
<div class="ttc" id="channel__ref_8c_html_adddbdc58824b567334d46493decc90f8"><div class="ttname"><a href="channel__ref_8c.html#adddbdc58824b567334d46493decc90f8">channel_ref_check_state</a></div><div class="ttdeci">int channel_ref_check_state(channel_ref_t *channel_ref, channel_state_e state)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00291">channel_ref.c:291</a></div></div>
<div class="ttc" id="struct__loop__t_html_a86104bd04919fe312148e2efcf73a92b"><div class="ttname"><a href="struct__loop__t.html#a86104bd04919fe312148e2efcf73a92b">_loop_t::event_list</a></div><div class="ttdeci">dlist_t * event_list</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00038">loop.c:38</a></div></div>
<div class="ttc" id="misc_8c_html_a0e47279c8c752d22446932673be52e38"><div class="ttname"><a href="misc_8c.html#a0e47279c8c752d22446932673be52e38">lock_create</a></div><div class="ttdeci">lock_t * lock_create()</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00495">misc.c:495</a></div></div>
<div class="ttc" id="loop_8c_html_abedbb538c1cc8ef805dbfc0f58d80f9e"><div class="ttname"><a href="loop_8c.html#abedbb538c1cc8ef805dbfc0f58d80f9e">loop_set_balancer</a></div><div class="ttdeci">void loop_set_balancer(loop_t *loop, loop_balancer_t *balancer)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00328">loop.c:328</a></div></div>
<div class="ttc" id="loop_8h_html_ae6d969c43313283fd7490201d637e29f"><div class="ttname"><a href="loop_8h.html#ae6d969c43313283fd7490201d637e29f">impl_event_add</a></div><div class="ttdeci">int impl_event_add(channel_ref_t *channel_ref, channel_event_e e)</div></div>
<div class="ttc" id="loop_8c_html_a604184ddcd3e06bc7bfd4f1722778029"><div class="ttname"><a href="loop_8c.html#a604184ddcd3e06bc7bfd4f1722778029">loop_get_close_channel_count</a></div><div class="ttdeci">int loop_get_close_channel_count(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00385">loop.c:385</a></div></div>
<div class="ttc" id="loop_8h_html_a182ab27e7200de7cea5aa0a4aa71a519"><div class="ttname"><a href="loop_8h.html#a182ab27e7200de7cea5aa0a4aa71a519">impl_create</a></div><div class="ttdeci">int impl_create(loop_t *loop)</div></div>
<div class="ttc" id="channel__ref_8c_html_a7627dbcdb87269ef2fae5bcbbb210720"><div class="ttname"><a href="channel__ref_8c.html#a7627dbcdb87269ef2fae5bcbbb210720">channel_ref_set_cb</a></div><div class="ttdeci">void channel_ref_set_cb(channel_ref_t *channel_ref, channel_ref_cb_t cb)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00524">channel_ref.c:524</a></div></div>
<div class="ttc" id="list_8c_html_a419689054005a74cabe8c51932505580"><div class="ttname"><a href="list_8c.html#a419689054005a74cabe8c51932505580">dlist_add_front</a></div><div class="ttdeci">void dlist_add_front(dlist_t *dlist, dlist_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00120">list.c:120</a></div></div>
<div class="ttc" id="loop_8c_html_a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf"><div class="ttname"><a href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da77ae92c7311b87c9e301782962e8d0bf">loop_event_send</a></div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00051">loop.c:51</a></div></div>
<div class="ttc" id="loop_8c_html_a8eb0f6c8d398c70fc5ca2292664a1187"><div class="ttname"><a href="loop_8c.html#a8eb0f6c8d398c70fc5ca2292664a1187">loop_run</a></div><div class="ttdeci">int loop_run(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00255">loop.c:255</a></div></div>
<div class="ttc" id="loop_8c_html_a2f1994d76e46cf4855ac955ccd41d9ef"><div class="ttname"><a href="loop_8c.html#a2f1994d76e46cf4855ac955ccd41d9ef">loop_run_once</a></div><div class="ttdeci">int loop_run_once(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00249">loop.c:249</a></div></div>
<div class="ttc" id="config_8h_html_a18bbc160902cdba0f52f5a3cd879b47facb41aa62d7b96cf4330a4495af2fc913"><div class="ttname"><a href="config_8h.html#a18bbc160902cdba0f52f5a3cd879b47facb41aa62d7b96cf4330a4495af2fc913">channel_state_connect</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00138">config.h:138</a></div></div>
<div class="ttc" id="loop_8h_html_af6be25e4d8b08e68ad1730611fc7f15c"><div class="ttname"><a href="loop_8h.html#af6be25e4d8b08e68ad1730611fc7f15c">impl_run_once</a></div><div class="ttdeci">int impl_run_once(loop_t *loop)</div></div>
<div class="ttc" id="loop_8c_html_a6c9f3ec8e93c6e7b10ebb4dcaca562d4"><div class="ttname"><a href="loop_8c.html#a6c9f3ec8e93c6e7b10ebb4dcaca562d4">loop_notify_close</a></div><div class="ttdeci">void loop_notify_close(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00180">loop.c:180</a></div></div>
<div class="ttc" id="logger_8h_html"><div class="ttname"><a href="logger_8h.html">logger.h</a></div></div>
<div class="ttc" id="config_8h_html_ad8bc998d415be9115a064a8307df0ed5a722f316dc97e835ba613f7a505992dfd"><div class="ttname"><a href="config_8h.html#ad8bc998d415be9115a064a8307df0ed5a722f316dc97e835ba613f7a505992dfd">error_ok</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00159">config.h:159</a></div></div>
<div class="ttc" id="loop_8c_html_ad7e8d90516c4589dd497ec36f6b9bd72"><div class="ttname"><a href="loop_8c.html#ad7e8d90516c4589dd497ec36f6b9bd72">loop_event_create</a></div><div class="ttdeci">loop_event_t * loop_event_create(channel_ref_t *channel_ref, buffer_t *send_buffer, loop_event_e e)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00061">loop.c:61</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a98676b725d853de8a576f97e1eeb9068"><div class="ttname"><a href="channel__ref_8c.html#a98676b725d853de8a576f97e1eeb9068">channel_ref_set_loop_node</a></div><div class="ttdeci">void channel_ref_set_loop_node(channel_ref_t *channel_ref, dlist_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00259">channel_ref.c:259</a></div></div>
<div class="ttc" id="config_8h_html_aaf2cba5d4035f3d56350b59342ebf65c"><div class="ttname"><a href="config_8h.html#aaf2cba5d4035f3d56350b59342ebf65c">channel_cb_event_e</a></div><div class="ttdeci">enum _channel_cb_event_e channel_cb_event_e</div></div>
<div class="ttc" id="loop_8c_html_a074c9c3a80a8a5c57b831e41395d4ef5"><div class="ttname"><a href="loop_8c.html#a074c9c3a80a8a5c57b831e41395d4ef5">loop_remove_channel_ref</a></div><div class="ttdeci">void loop_remove_channel_ref(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00300">loop.c:300</a></div></div>
<div class="ttc" id="config_8h_html_ad8bc998d415be9115a064a8307df0ed5a32ce41a842de240c70407e5d7d17815d"><div class="ttname"><a href="config_8h.html#ad8bc998d415be9115a064a8307df0ed5a32ce41a842de240c70407e5d7d17815d">error_loop_fail</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00170">config.h:170</a></div></div>
<div class="ttc" id="list_8h_html_a06e8f967efba4722dce2899baaa5c155"><div class="ttname"><a href="list_8h.html#a06e8f967efba4722dce2899baaa5c155">dlist_for_each_safe</a></div><div class="ttdeci">#define dlist_for_each_safe(list, node, temp)</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00173">list.h:173</a></div></div>
<div class="ttc" id="struct__loop__event__t_html"><div class="ttname"><a href="struct__loop__event__t.html">_loop_event_t</a></div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00055">loop.c:55</a></div></div>
<div class="ttc" id="logger_8h_html_a2c5b6f385060b9e82d7aa34ccb8d7546"><div class="ttname"><a href="logger_8h.html#a2c5b6f385060b9e82d7aa34ccb8d7546">log_fatal</a></div><div class="ttdeci">#define log_fatal(format, args...)</div><div class="ttdef"><b>Definition:</b> <a href="logger_8h_source.html#l00112">logger.h:112</a></div></div>
<div class="ttc" id="misc_8c_html_aecf10907eee00ec0e807271c906a6645"><div class="ttname"><a href="misc_8c.html#aecf10907eee00ec0e807271c906a6645">thread_get_self_id</a></div><div class="ttdeci">thread_id_t thread_get_self_id()</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00763">misc.c:763</a></div></div>
<div class="ttc" id="misc_8c_html_a99cf1d42527f5715b798064281e918ed"><div class="ttname"><a href="misc_8c.html#a99cf1d42527f5715b798064281e918ed">lock_unlock</a></div><div class="ttdeci">void lock_unlock(lock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="misc_8c_source.html#l00530">misc.c:530</a></div></div>
<div class="ttc" id="loop_8c_html_a898c7e8ef4ff2f360a32454b2b1013de"><div class="ttname"><a href="loop_8c.html#a898c7e8ef4ff2f360a32454b2b1013de">loop_exit</a></div><div class="ttdeci">void loop_exit(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00268">loop.c:268</a></div></div>
<div class="ttc" id="loop_8c_html_a1f9df6866c80e91a620320298d199315"><div class="ttname"><a href="loop_8c.html#a1f9df6866c80e91a620320298d199315">loop_get_balancer</a></div><div class="ttdeci">loop_balancer_t * loop_get_balancer(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00333">loop.c:333</a></div></div>
<div class="ttc" id="struct__loop__t_html_a5abc8854de864ba27aed98db787118da"><div class="ttname"><a href="struct__loop__t.html#a5abc8854de864ba27aed98db787118da">_loop_t::balance_options</a></div><div class="ttdeci">loop_balance_option_e balance_options</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00046">loop.c:46</a></div></div>
<div class="ttc" id="loop_8c_html_a6879ac453ef83768ce8f8ef43a474409"><div class="ttname"><a href="loop_8c.html#a6879ac453ef83768ce8f8ef43a474409">loop_create_channel_exist_socket_fd</a></div><div class="ttdeci">channel_ref_t * loop_create_channel_exist_socket_fd(loop_t *loop, socket_t socket_fd, uint32_t max_send_list_len, uint32_t recv_ring_len)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00234">loop.c:234</a></div></div>
<div class="ttc" id="config_8h_html_a2217ac7363dbae279d056a361d122915a7bb5e8d7574bce246b68c022c06b91e6"><div class="ttname"><a href="config_8h.html#a2217ac7363dbae279d056a361d122915a7bb5e8d7574bce246b68c022c06b91e6">channel_cb_event_close</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00209">config.h:209</a></div></div>
<div class="ttc" id="loop_8c_html_a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150"><div class="ttname"><a href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93d334afa1678d196564d70b138c7150">loop_event_close</a></div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00052">loop.c:52</a></div></div>
<div class="ttc" id="channel__ref_8c_html_aaa459c5e4bd63d343a31b5968a3ae5bd"><div class="ttname"><a href="channel__ref_8c.html#aaa459c5e4bd63d343a31b5968a3ae5bd">channel_ref_set_event</a></div><div class="ttdeci">void channel_ref_set_event(channel_ref_t *channel_ref, channel_event_e e)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00269">channel_ref.c:269</a></div></div>
<div class="ttc" id="list_8c_html_ad9f16c04ff5534a96e7585226effba4d"><div class="ttname"><a href="list_8c.html#ad9f16c04ff5534a96e7585226effba4d">dlist_add_front_node</a></div><div class="ttdeci">dlist_node_t * dlist_add_front_node(dlist_t *dlist, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00140">list.c:140</a></div></div>
<div class="ttc" id="struct__loop__balancer__t_html"><div class="ttname"><a href="struct__loop__balancer__t.html">_loop_balancer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="loop__balancer_8c_source.html#l00036">loop_balancer.c:36</a></div></div>
<div class="ttc" id="loop_8c_html_a61e9eb6eeaaad4d1d655beba05bb8440"><div class="ttname"><a href="loop_8c.html#a61e9eb6eeaaad4d1d655beba05bb8440">loop_notify_accept</a></div><div class="ttdeci">void loop_notify_accept(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00167">loop.c:167</a></div></div>
<div class="ttc" id="struct__dlist__t_html"><div class="ttname"><a href="struct__dlist__t.html">_dlist_t</a></div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00039">list.c:39</a></div></div>
<div class="ttc" id="config_8h_html_a7bb0b359ffebe8a540dded73bd47417a"><div class="ttname"><a href="config_8h.html#a7bb0b359ffebe8a540dded73bd47417a">destroy</a></div><div class="ttdeci">#define destroy(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00100">config.h:100</a></div></div>
<div class="ttc" id="struct__loop__t_html_ae77337a149b2612ee5f36834d9a33426"><div class="ttname"><a href="struct__loop__t.html#ae77337a149b2612ee5f36834d9a33426">_loop_t::notify_channel</a></div><div class="ttdeci">channel_ref_t * notify_channel</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00040">loop.c:40</a></div></div>
<div class="ttc" id="struct__loop__t_html_abf14bc3bc3eb5e72e92811fcc36b5063"><div class="ttname"><a href="struct__loop__t.html#abf14bc3bc3eb5e72e92811fcc36b5063">_loop_t::lock</a></div><div class="ttdeci">lock_t * lock</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00039">loop.c:39</a></div></div>
<div class="ttc" id="config_8h_html_a0f82b35b603ffed92ea1a74205f10781a11dd0233ba7e160d5a1986befd9bdad1"><div class="ttname"><a href="config_8h.html#a0f82b35b603ffed92ea1a74205f10781a11dd0233ba7e160d5a1986befd9bdad1">loop_balancer_in</a></div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00153">config.h:153</a></div></div>
<div class="ttc" id="loop_8c_html_a841de68dad67aba3b98d2c55d2891521"><div class="ttname"><a href="loop_8c.html#a841de68dad67aba3b98d2c55d2891521">loop_check_running</a></div><div class="ttdeci">int loop_check_running(loop_t *loop)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00377">loop.c:377</a></div></div>
<div class="ttc" id="struct__loop__t_html_aedfc211b821dd460c2e4b15b313f5d62"><div class="ttname"><a href="struct__loop__t.html#aedfc211b821dd460c2e4b15b313f5d62">_loop_t::close_channel_list</a></div><div class="ttdeci">dlist_t * close_channel_list</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00037">loop.c:37</a></div></div>
<div class="ttc" id="loop_8c_html_a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34"><div class="ttname"><a href="loop_8c.html#a19ff97cc6f736cb864d4e4b6ca60989da93a9ab540948567abea69a6e0b11dc34">loop_event_accept</a></div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00050">loop.c:50</a></div></div>
<div class="ttc" id="channel__ref_8c_html_a1495c5893bdd3bf7508c0d13c7a591a6"><div class="ttname"><a href="channel__ref_8c.html#a1495c5893bdd3bf7508c0d13c7a591a6">channel_ref_get_cb</a></div><div class="ttdeci">channel_ref_cb_t channel_ref_get_cb(channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00529">channel_ref.c:529</a></div></div>
<div class="ttc" id="channel__ref_8c_html_af2b04a39619b524c176a1b921a2a662d"><div class="ttname"><a href="channel__ref_8c.html#af2b04a39619b524c176a1b921a2a662d">channel_ref_update_accept_in_loop</a></div><div class="ttdeci">void channel_ref_update_accept_in_loop(loop_t *loop, channel_ref_t *channel_ref)</div><div class="ttdef"><b>Definition:</b> <a href="channel__ref_8c_source.html#l00348">channel_ref.c:348</a></div></div>
<div class="ttc" id="loop_8c_html_aa9654f1b872059f74665506fd67c9bc5"><div class="ttname"><a href="loop_8c.html#aa9654f1b872059f74665506fd67c9bc5">loop_set_impl</a></div><div class="ttdeci">void loop_set_impl(loop_t *loop, void *impl)</div><div class="ttdef"><b>Definition:</b> <a href="loop_8c_source.html#l00307">loop.c:307</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2015年 六月 29日 星期一 16:51:00 , 为 knet使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
